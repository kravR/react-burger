{"version":3,"sources":["components/ingredients-section/styles.module.css","components/draggable-element/styles.module.css","pages/main/styles.module.css","pages/ingredient/styles.module.css","components/orders-feed/styles.module.css","pages/feed/styles.module.css","components/form/styles.module.css","pages/order/styles.module.css","pages/profile/profile-orders/styles.module.css","components/loader/styles.module.css","components/order-details/styles.module.css","components/modal-overlay/styles.module.css","components/container/styles.module.css","pages/profile/styles.module.css","services/hooks/index.ts","utils/constants.ts","api/ServerError.ts","api/http/core/publicApi.ts","api/http/ingredient.ts","services/actions/burger-ingredients.ts","services/actions/ingredient-details.ts","components/card/index.tsx","components/ingredients-section/index.tsx","components/burger-ingredients/index.tsx","services/actions/burger-constructor.ts","components/draggable-element/index.tsx","api/http/core/privateApi.ts","api/http/token.ts","api/http/order.ts","services/actions/order.ts","services/types/data.ts","components/burger-constructor/index.tsx","pages/main/index.tsx","components/ingredient-details/index.tsx","pages/ingredient/index.tsx","services/actions/wsActions.ts","utils/formatTimeAgo.ts","components/ingregient-avatar/index.tsx","components/ingregient-avatars/index.tsx","components/order/index.tsx","components/orders-feed/index.tsx","components/orders-summary/index.tsx","pages/feed/index.tsx","components/form/index.tsx","api/http/user.ts","services/actions/auth.ts","api/http/auth.ts","pages/login/index.tsx","components/feed-details/index.tsx","utils/getCountsValues.ts","pages/order/index.tsx","pages/register/index.tsx","pages/forgot-password/index.tsx","pages/reset-password/index.tsx","pages/profile/profile-form/index.tsx","utils/sortOrderByDate.ts","pages/profile/profile-orders/index.tsx","pages/profile/index.tsx","pages/page-404/index.tsx","components/header/index.tsx","components/protected-route/index.tsx","components/loader/index.tsx","images/done.png","components/order-details/index.tsx","components/modal-overlay/index.tsx","components/modal/index.tsx","components/container/index.tsx","components/app/index.tsx","services/reducers/burger-ingredients.ts","services/reducers/burger-constructor.ts","services/reducers/ingredient-details.ts","services/reducers/order.ts","services/reducers/auth.ts","services/reducers/wsReducer.ts","services/reducers/index.ts","services/store/index.ts","services/middleware/socketMiddleware.ts","index.tsx","components/header/styles.module.css","components/feed-details/styles.module.css","components/burger-constructor/styles.module.css","components/ingredient-details/styles.module.css","components/order/styles.module.css","components/orders-summary/styles.module.css","pages/login/styles.module.css","components/ingregient-avatars/styles.module.css","components/card/styles.module.css","pages/register/styles.module.css","components/modal/styles.module.css","components/burger-ingredients/styles.module.css","pages/forgot-password/styles.module.css","pages/reset-password/styles.module.css","pages/page-404/styles.module.css","components/ingregient-avatar/styles.module.css"],"names":["module","exports","useDispatch","dispatchHook","useSelector","selectorHook","API_URL","WSS_API_ORDERS","WSS_API_USER_ORDERS","ServerError","message","status","Error","request","url","method","body","fetch","headers","Accept","then","response","ok","json","Promise","reject","catch","a","error","post","path","JSON","stringify","getIngredients","data","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","INCREASE_INGREDIENT_COUNT","DECREASE_INGREDIENT_COUNT","CLEAR_BUN_COUNT","CLEAR_INGREDIENTS_COUNT","getIngredientsData","dispatch","type","ingredientService","ingredients","SELECT_INGREDIENT","Card","history","useHistory","location","useLocation","useDrag","item","collect","monitor","opacity","isDragging","ref","className","styles","card","onClick","id","_id","ingredient","push","pathname","state","background","style","src","image","alt","name","card__img","card__price","price","card__title","qty","count","size","IngredientsSection","forwardRef","title","section","map","BurgerIngredients","useState","currentTab","setCurrentTab","store","isLoading","isError","bun","useMemo","filter","sauce","main","tabs","refToSection","useRef","handleTabChange","tab","useEffect","find","current","scrollIntoView","behavior","ingredients__tabs","value","active","ingredients__content","ADD_BUN","DELETE_BUN","ADD_INGREDIENT","DELETE_INGREDIENT","SORT_INGREDIENTS","RESET_CONSTRUCTOR","DraggableElement","index","dragRef","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverClientY","y","dropRef","text","thumbnail","image_mobile","handleClose","uuid","Authorization","localStorage","getItem","requestWithRefresh","refreshPromise","publicApi","token","setItem","refreshToken","accessToken","removeItem","createOrder","params","order","ORDER_STATUSES","CREATE_ORDER_REQUEST","CREATE_ORDER_SUCCESS","CREATE_ORDER_FAILED","RESET_ORDER","SET_ORDER_ITEMS","SELECT_ORDER","BurgerConstructor","isAuthorized","auth","burger","filling","cost","reduce","acc","isHover","isOver","drop","element","dropTarget","borderColor","constructor","constructor__items","border","borderRadius","length","constructor__item","isLocked","textAlign","constructor__bottom","constructor__cost","orderService","number","MainPage","DndProvider","backend","HTML5Backend","IngredientDetails","ingredient__image","image_large","width","height","ingredient__items","ingredient__item","calories","proteins","fat","carbohydrates","IngredientPage","ingredientId","useParams","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","formatTimeAgo","date","formatter","Intl","RelativeTimeFormat","undefined","numeric","DIVISIONS","amount","Number","POSITIVE_INFINITY","dateParse","Date","hours","getHours","minutes","getMinutes","UTC","getTimezoneOffset","duration","getTime","i","division","Math","abs","format","round","NumberFormat","signDisplay","IngredientAvatar","avatar","img","IngredientAvatars","items","max","avatars","bg","more","slice","Order","isUserOrder","useRouteMatch","uniqueOrderIngredients","Array","from","Set","Boolean","orderIngredients","orderPrice","info","createdAt","status_done","details","OrdersFeed","orders","OrdersSummary","ordersReady","ordersInProgress","total","totalToday","summary","FeedPage","ordersFeed","wsError","wsConnected","ordersData","DONE","PENDING","payload","feed","Form","props","wrapper","getUser","user","updateUser","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILED","REGISTRATION_REQUEST","REGISTRATION_SUCCESS","REGISTRATION_FAILED","USER_REQUEST","USER_SUCCESS","USER_FAILED","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAILED","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAILED","UPDATE_TOKEN_REQUEST","UPDATE_TOKEN_SUCCESS","UPDATE_TOKEN_FAILED","registration","formValues","login","logout","authService","forgotPassword","resetPassword","userService","LoginPage","email","password","values","setFormValues","handleChange","event","prevState","target","handleSubmit","preventDefault","to","page","onSubmit","placeholder","onChange","links","link","FeedDetails","allOrderIngredients","countsIngredients","arr","counts","Map","has","set","get","getCountsValues","ingredient__info","ingredient__price","feed__footer","OrderPage","orderId","replace","trim","RegisterPage","ForgotPassword","ResetPassword","isReset","setType","passwordRef","selectionStart","selectionEnd","icon","onIconClick","inputRef","focus","ProfileForm","nameRef","emailRef","onFocusInput","classList","add","onBlurInput","remove","form","onFocus","onBlur","form_btns","sortOrderByDate","b","ProfileOrders","sort","Profile","memo","action","handleClickLogOut","menu","exact","activeClassName","link_active","content","Page404","goBack","Header","isConstructor","isFeed","isProfile","header","container","nav","logo","profile","ProtectedRoute","children","render","Loader","loader","OrderDetails","doneIcon","ModalOverlay","onClose","Modal","modalRoot","document","querySelector","handleCloseModal","stopPropagation","key","addEventListener","removeEventListener","ReactDOM","createPortal","modal","modal__title","modal__close","Container","App","initialState","rootReducer","combineReducers","dragItem","hoverItem","wsActions","onInit","onOpen","onError","onMessage","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","wsUrl","socket","next","WebSocket","onopen","onerror","onmessage","parse","onclose","close","socketMiddleware","createStore","StrictMode","basename","getElementById"],"mappings":"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","file":"static/js/main.166a3e85.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"styles_section__2dFRU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"styles_item__35qcz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"styles_main__3uaNG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"styles_ingredient__3Udhc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orders-feed\":\"styles_orders-feed__q7GKK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"styles_feed__1HPQl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__3IsHx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"styles_order__2sS9k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"history\":\"styles_history__3EGWl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"styles_loader__3QW4r\",\"spinRight\":\"styles_spinRight__2gydz\",\"spinLeft\":\"styles_spinLeft__321Nt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"styles_order__3Z1FK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2NyAe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1v5an\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"styles_page__3gS0i\",\"menu\":\"styles_menu__3FJ_j\",\"link\":\"styles_link__I_QyP\",\"link_active\":\"styles_link_active__1ykfl\",\"content\":\"styles_content__D8jUU\",\"form_btns\":\"styles_form_btns__1EJUE\",\"error\":\"styles_error__1xW-8\",\"form\":\"styles_form__1F-3j\",\"active\":\"styles_active__1_6ND\"};","import {\n  TypedUseSelectorHook,\n  useDispatch as dispatchHook,\n  useSelector as selectorHook,\n} from \"react-redux\";\nimport { AppDispatch, RootState, AppThunk } from \"../types\";\n\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\n","export const API_URL = \"https://norma.nomoreparties.space/api\";\nexport const WSS_URL = \"wss://norma.nomoreparties.space\";\nexport const WSS_API_ORDERS = \"orders/all\";\nexport const WSS_API_USER_ORDERS = \"orders\";\n","export class ServerError extends Error {\n  public status: number;\n\n  constructor(message: string, status: number) {\n    super(message);\n    this.status = status;\n  }\n}\n","import { API_URL } from \"../../../utils/constants\";\nimport { ServerError } from \"../../ServerError\";\n\nfunction request(url: string, method: string, body?: any) {\n  return fetch(url, {\n    method,\n    headers: {\n      Accept: \"application/json\",\n      \"Content-type\": \"application/json\",\n    },\n    body,\n  })\n    .then((response: Response) => {\n      if (!response.ok) {\n        return Promise.reject(response);\n      }\n      return response.json();\n    })\n    .catch(async (response: Response) => {\n      const error = await response.json().then((response) => response);\n      return Promise.reject(new ServerError(error.message, response.status));\n    });\n}\n\nexport function get(path) {\n  return request(`${API_URL}/${path}`, \"GET\");\n}\n\nexport function post(path, body) {\n  return request(`${API_URL}/${path}`, \"POST\", JSON.stringify(body));\n}\n","import * as publicApi from \"./core/publicApi\";\n\nimport { IIngredientData } from \"../../services/types/data\";\n\nexport function getIngredients(): Promise<Array<IIngredientData>> {\n  return publicApi.get(\"ingredients\").then((response) => response.data);\n}\n","import * as ingredientService from \"../../api/http/ingredient\";\n\nimport { AppThunk, AppDispatch } from \"../types\";\nimport { IIngredientData } from \"../types/data\";\n\nexport const GET_INGREDIENTS_REQUEST = \"GET_INGREDIENTS_REQUEST\" as const;\nexport const GET_INGREDIENTS_SUCCESS = \"GET_INGREDIENTS_SUCCESS\" as const;\nexport const GET_INGREDIENTS_FAILED = \"GET_INGREDIENTS_FAILED\" as const;\n\nexport const INCREASE_INGREDIENT_COUNT = \"INCREASE_INGREDIENT_COUNT\" as const;\nexport const DECREASE_INGREDIENT_COUNT = \"DECREASE_INGREDIENT_COUNT\" as const;\n\nexport const CLEAR_BUN_COUNT = \"CLEAR_BUN_COUNT\" as const;\nexport const CLEAR_INGREDIENTS_COUNT = \"CLEAR_INGREDIENTS_COUNT\" as const;\n\nexport interface IIngredientsRequest {\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\n}\nexport interface IIngredientsSuccess {\n  readonly type: typeof GET_INGREDIENTS_SUCCESS;\n  readonly ingredients: Array<IIngredientData>;\n}\nexport interface IIngredientsFailed {\n  readonly type: typeof GET_INGREDIENTS_FAILED;\n}\n\nexport interface IIncreaseIngredientCount {\n  readonly type: typeof INCREASE_INGREDIENT_COUNT;\n  qty: number;\n  id: string;\n}\nexport interface IDecreaseIngredientCount {\n  readonly type: typeof DECREASE_INGREDIENT_COUNT;\n  qty: number;\n  id: string;\n}\n\nexport interface IClearBunCount {\n  readonly type: typeof CLEAR_BUN_COUNT;\n  readonly ingredients: Array<IIngredientData>;\n}\n\nexport interface IClearIngredientsCount {\n  readonly type: typeof CLEAR_INGREDIENTS_COUNT;\n}\n\nexport type TBurgerIngredientsActions =\n  | IIngredientsRequest\n  | IIngredientsSuccess\n  | IIngredientsFailed\n  | IIncreaseIngredientCount\n  | IDecreaseIngredientCount\n  | IClearBunCount\n  | IClearIngredientsCount;\n\nexport const getIngredientsData: AppThunk = () => (dispatch: AppDispatch) => {\n  dispatch({\n    type: GET_INGREDIENTS_REQUEST,\n  });\n\n  return ingredientService\n    .getIngredients()\n    .then((ingredients) =>\n      dispatch({ type: GET_INGREDIENTS_SUCCESS, ingredients })\n    )\n    .catch(() => dispatch({ type: GET_INGREDIENTS_FAILED }));\n};\n","import { IIngredientData } from \"../types/data\";\n\nexport const SELECT_INGREDIENT = \"SELECT_INGREDIENT\" as const;\n\nexport interface ISelectIngredient {\n  readonly type: typeof SELECT_INGREDIENT;\n  readonly ingredient: IIngredientData;\n}\n\nexport type TIngredientDetailsActions = ISelectIngredient;\n","import { FC } from \"react\";\nimport { useDrag } from \"react-dnd\";\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nimport {\n  Counter,\n  CurrencyIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport { SELECT_INGREDIENT } from \"../../services/actions/ingredient-details\";\nimport { useDispatch } from \"../../services/hooks\";\n\nimport { IProps } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nconst Card: FC<IProps> = ({ data }) => {\n  const history = useHistory();\n  const location = useLocation();\n  const dispatch = useDispatch();\n\n  const [{ opacity }, ref] = useDrag({\n    type: \"item\",\n    item: { ...data },\n    collect: (monitor) => ({\n      opacity: monitor.isDragging() ? 0.3 : 1,\n    }),\n  });\n\n  const handleCardDetail = (id: string) => {\n    dispatch({\n      type: SELECT_INGREDIENT,\n      ingredient: data,\n    });\n    history.push({\n      pathname: `ingredients/${id}`,\n      state: { background: location },\n    });\n  };\n\n  return (\n    <article\n      className={styles.card}\n      onClick={() => handleCardDetail(data?._id)}\n      ref={ref}\n      style={{ opacity }}\n    >\n      <img src={data?.image} alt={data?.name} className={styles.card__img} />\n      <div className={`${styles.card__price} mt-1 mb-1`}>\n        <span className=\"text text_type_digits-default mr-1\">\n          {data?.price}\n        </span>\n        <CurrencyIcon type=\"primary\" />\n      </div>\n      <h3 className={`${styles.card__title} text text_type_main-default`}>\n        {data?.name}\n      </h3>\n\n      {!!data?.qty && data.qty > 0 && (\n        <Counter count={data?.qty} size=\"default\" />\n      )}\n    </article>\n  );\n};\n\nexport default Card;\n","import { forwardRef } from \"react\";\n\nimport Card from \"../card\";\n\nimport { IProps } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nconst IngredientsSection = forwardRef<HTMLDivElement, IProps>(\n  ({ title, data }, ref) => {\n    return (\n      <>\n        {title && (\n          <h3 className=\"text text_type_main-medium pb-6\" ref={ref}>\n            {title}\n          </h3>\n        )}\n\n        {data && (\n          <div className={`${styles.section} pt-6 pr-2 pb-6 pl-4`}>\n            {data.map((item) => (\n              <Card data={item} key={item._id} />\n            ))}\n          </div>\n        )}\n      </>\n    );\n  }\n);\n\nexport default IngredientsSection;\n","import { FC, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"../../services/hooks\";\n\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport { getIngredientsData } from \"../../services/actions/burger-ingredients\";\nimport IngredientsSection from \"../ingredients-section\";\nimport { ITabsData } from \"./types\";\n\nimport styles from \"./styles.module.css\";\n\nconst BurgerIngredients: FC = () => {\n  const [currentTab, setCurrentTab] = useState<string>(\"bun\");\n  const { isLoading, isError, ingredients } = useSelector(\n    (store) => store.ingredients\n  );\n  const dispatch = useDispatch();\n\n  const bun = useMemo(\n    () => ingredients?.filter((item) => item.type === \"bun\"),\n    [ingredients]\n  );\n  const sauce = useMemo(\n    () => ingredients?.filter((item) => item.type === \"sauce\"),\n    [ingredients]\n  );\n  const main = useMemo(\n    () => ingredients?.filter((item) => item.type === \"main\"),\n    [ingredients]\n  );\n\n  const tabs: Array<ITabsData> = [\n    {\n      id: \"bun\",\n      title: \"Булки\",\n      refToSection: useRef<HTMLDivElement>(null),\n      data: bun,\n    },\n    {\n      id: \"sauce\",\n      title: \"Соусы\",\n      refToSection: useRef<HTMLDivElement>(null),\n      data: sauce,\n    },\n    {\n      id: \"main\",\n      title: \"Начинки\",\n      refToSection: useRef<HTMLDivElement>(null),\n      data: main,\n    },\n  ];\n\n  const handleTabChange = (tab: ITabsData) => () => {\n    setCurrentTab(tab.id);\n  };\n\n  useEffect(() => {\n    let tab = tabs.find((tab) => tab.id === currentTab);\n\n    if (tab && tab.refToSection.current !== null) {\n      tab.refToSection.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  });\n\n  useEffect(() => {\n    dispatch(getIngredientsData());\n  }, [dispatch]);\n\n  return isLoading ? (\n    <h3 className=\"text text_type_main-default mt-10 mb-5\">...загрузка</h3>\n  ) : isError ? (\n    <h3 className=\"text text_type_main-default mt-10 mb-5\">\n      Произошла ошибка при получении данных\n    </h3>\n  ) : (\n    <div className={styles.ingredients}>\n      <div className={`${styles.ingredients__tabs} mb-10`}>\n        {tabs.map((tab) => (\n          <Tab\n            key={tab.id}\n            value={tab.title}\n            active={tab.id === currentTab}\n            onClick={handleTabChange(tab)}\n          >\n            {tab.title}\n          </Tab>\n        ))}\n      </div>\n      <div className={`${styles.ingredients__content} scrollbar`}>\n        {tabs.map((tab) => (\n          <IngredientsSection\n            key={tab.id}\n            title={tab.title}\n            data={tab.data}\n            ref={tab.refToSection}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default BurgerIngredients;\n","import { IIngredientData } from \"../types/data\";\n\nexport const ADD_BUN = \"ADD_BUN\" as const;\nexport const DELETE_BUN = \"DELETE_BUN\" as const;\nexport const ADD_INGREDIENT = \"ADD_INGREDIENT\" as const;\nexport const DELETE_INGREDIENT = \"DELETE_INGREDIENT\" as const;\nexport const SORT_INGREDIENTS = \"SORT_INGREDIENTS\" as const;\nexport const RESET_CONSTRUCTOR = \"RESET_CONSTRUCTOR\" as const;\n\nexport interface IAddBun {\n  readonly type: typeof ADD_BUN;\n  readonly bun: IIngredientData;\n}\nexport interface IDeleteBun {\n  readonly type: typeof DELETE_BUN;\n}\n\nexport interface IAddIngredient {\n  readonly type: typeof ADD_INGREDIENT;\n  readonly item: IIngredientData;\n}\nexport interface IDeleteIngredient {\n  readonly type: typeof DELETE_INGREDIENT;\n  readonly id: string;\n}\n\nexport interface ISortIngredients {\n  readonly type: typeof SORT_INGREDIENTS;\n  readonly dragIndex: number;\n  readonly hoverIndex: number;\n}\n\nexport interface IResetConstructor {\n  readonly type: typeof RESET_CONSTRUCTOR;\n}\n\nexport type TBurgerConstructorActions =\n  | IAddBun\n  | IDeleteBun\n  | IAddIngredient\n  | IDeleteIngredient\n  | ISortIngredients\n  | IResetConstructor;\n","import { FC, useRef } from \"react\";\nimport { useDrag, useDrop } from \"react-dnd\";\n\nimport {\n  ConstructorElement,\n  DragIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport {\n  DELETE_INGREDIENT,\n  SORT_INGREDIENTS,\n} from \"../../services/actions/burger-constructor\";\nimport { DECREASE_INGREDIENT_COUNT } from \"../../services/actions/burger-ingredients\";\nimport { useDispatch } from \"../../services/hooks\";\n\nimport { IProps } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nconst DraggableElement: FC<IProps> = ({ index, item }) => {\n  const dispatch = useDispatch();\n  const ref = useRef<HTMLDivElement>(null);\n\n  const [{ isDragging }, dragRef] = useDrag({\n    type: \"itemBurger\",\n    item: { index },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [{ handlerId }, dropRef] = useDrop({\n    accept: \"itemBurger\",\n    collect(monitor) {\n      return {\n        handlerId: monitor.getHandlerId(),\n      };\n    },\n    hover(item: { index: number; id: string }, monitor) {\n      if (!ref.current) return;\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      if (dragIndex === hoverIndex) return;\n\n      const hoverBoundingRect = ref.current.getBoundingClientRect();\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset === null) return;\n\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) return;\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) return;\n\n      dispatch({ type: SORT_INGREDIENTS, dragIndex, hoverIndex });\n      item.index = hoverIndex;\n    },\n  });\n\n  dragRef(dropRef(ref));\n\n  const opacity = isDragging ? 0.5 : 1;\n\n  const onDelete = () => {\n    dispatch({ type: DELETE_INGREDIENT, id: item.uuid });\n    dispatch({\n      type: DECREASE_INGREDIENT_COUNT,\n      id: item._id,\n      qty: 1,\n    });\n  };\n\n  return (\n    <div\n      className={`${styles.item} ml-2 mb-4`}\n      style={{ opacity }}\n      ref={ref}\n      data-handler-id={handlerId}\n    >\n      <DragIcon type=\"primary\" />\n      <ConstructorElement\n        text={item?.name}\n        thumbnail={item?.image_mobile ? item?.image_mobile : \"\"}\n        price={item?.price}\n        handleClose={onDelete}\n      />\n    </div>\n  );\n};\n\nexport default DraggableElement;\n","import { API_URL } from \"../../../utils/constants\";\nimport { ServerError } from \"../../ServerError\";\nimport { refreshToken } from \"../token\";\n\nfunction request(url: string, method: string, body?: any): Promise<any> {\n  return fetch(url, {\n    method,\n    headers: {\n      Accept: \"application/json\",\n      \"Content-type\": \"application/json\",\n      Authorization: `${localStorage.getItem(\"accessToken\")}`,\n    },\n    body,\n  })\n    .then((response: Response) => {\n      if (!response.ok) {\n        return Promise.reject(response);\n      }\n\n      return response.json();\n    })\n    .catch(async (response: Response): Promise<void> => {\n      const error = await response.json().then((response) => response);\n\n      if (error.message === \"jwt expired\") {\n        const requestWithRefresh = request as unknown as {\n          refreshPromise: Promise<any> | undefined;\n        };\n\n        if (!requestWithRefresh.refreshPromise) {\n          requestWithRefresh.refreshPromise = refreshToken().then(\n            (response) => {\n              delete requestWithRefresh.refreshPromise;\n              return response;\n            }\n          );\n        }\n\n        return requestWithRefresh.refreshPromise.then(() =>\n          request(url, method, body)\n        );\n      }\n\n      return Promise.reject(new ServerError(error.message, response.status));\n    });\n}\n\nexport function get(path) {\n  return request(`${API_URL}/${path}`, \"GET\");\n}\n\nexport function post(path, body) {\n  return request(`${API_URL}/${path}`, \"POST\", JSON.stringify(body));\n}\n\nexport function patch(path, body) {\n  return request(`${API_URL}/${path}`, \"PATCH\", JSON.stringify(body));\n}\n\nexport function del(path, body) {\n  return request(`${API_URL}/${path}`, \"DELETE\", JSON.stringify(body));\n}\n","import * as publicApi from \"./core/publicApi\";\n\nexport function refreshToken(): Promise<void> {\n  return publicApi\n    .post(\"auth/token\", { token: localStorage.getItem(\"refreshToken\") })\n    .then((response) => {\n      localStorage.setItem(\"refreshToken\", response.refreshToken);\n      localStorage.setItem(\"accessToken\", response.accessToken);\n    })\n    .catch(() => {\n      localStorage.removeItem(\"refreshToken\");\n      localStorage.removeItem(\"accessToken\");\n    });\n}\n","import * as privateApi from \"./core/privateApi\";\n\nimport { IOrderParams, IOrderResponse } from \"../../services/types/data\";\n\nexport function createOrder(params: IOrderParams): Promise<IOrderResponse> {\n  return privateApi.post(\"orders\", params).then((response) => response.order);\n}\n\n","import * as orderService from \"../../api/http/order\";\n\nimport { AppThunk, AppDispatch } from \"../types\";\nimport { IIngredientData, IOrderData } from \"../types/data\";\n\nexport const CREATE_ORDER_REQUEST = \"CREATE_ORDER_REQUEST\" as const;\nexport const CREATE_ORDER_SUCCESS = \"CREATE_ORDER_SUCCESS\" as const;\nexport const CREATE_ORDER_FAILED = \"CREATE_ORDER_FAILED\" as const;\nexport const RESET_ORDER = \"CLOSE_ORDER_MODAL\" as const;\nexport const SET_ORDER_ITEMS = \"SET_ORDER_ITEMS\" as const;\nexport const SELECT_ORDER = \"SELECT_ORDER\" as const;\n\nexport interface ICreateOrderRequest {\n  readonly type: typeof CREATE_ORDER_REQUEST;\n}\nexport interface ICreateOrderSuccess {\n  readonly type: typeof CREATE_ORDER_SUCCESS;\n  readonly number: number;\n}\nexport interface ICreateOrderFailed {\n  readonly type: typeof CREATE_ORDER_FAILED;\n}\n\nexport interface IResetOrder {\n  readonly type: typeof RESET_ORDER;\n}\n\nexport interface ISetOrderItems {\n  readonly type: typeof SET_ORDER_ITEMS;\n  readonly order: Array<IIngredientData>;\n}\n\nexport interface ISelectOrder {\n  readonly type: typeof SELECT_ORDER;\n  readonly order: IOrderData;\n}\n\nexport type TOrderActions =\n  | ICreateOrderRequest\n  | ICreateOrderSuccess\n  | ICreateOrderFailed\n  | IResetOrder\n  | ISetOrderItems\n  | ISelectOrder;\n\nexport const createOrder: AppThunk = (data) => (dispatch: AppDispatch) => {\n  dispatch({\n    type: CREATE_ORDER_REQUEST,\n  });\n\n  return orderService\n    .createOrder(data)\n    .then((order) =>\n      dispatch({ type: CREATE_ORDER_SUCCESS, number: order.number })\n    )\n    .catch(() => dispatch({ type: CREATE_ORDER_FAILED }));\n};\n","import { Location } from \"history\";\n\nexport interface ILocationState {\n  from?: Location;\n  background?: Location;\n}\n\nexport interface IIngredientData {\n  _id: string;\n  name: string;\n  type: string;\n  proteins: number;\n  fat: number;\n  carbohydrates: number;\n  calories: number;\n  price: number;\n  image: string;\n  image_mobile: string;\n  image_large: string;\n  qty?: number;\n  uuid?: string;\n}\n\nexport interface IRegistrationParams {\n  email: string;\n  password: string;\n  name: string;\n}\n\nexport interface ILoginParams {\n  email: string;\n  password: string;\n}\n\nexport interface IForgotPasswordParams {\n  email: string;\n}\n\nexport interface IResetPasswordParams {\n  password: string;\n  token: string;\n}\n\nexport interface IUserResponse {\n  email: string;\n  name: string;\n}\n\nexport interface IUserUpdateParams extends IRegistrationParams {}\n\nexport interface IOrderParams {\n  ingredients: Array<string>;\n}\n\nexport interface IOrderData {\n  _id: string;\n  number: number;\n  createdAt: string;\n  updatedAt: string;\n  name: string;\n  ingredients: Array<string>;\n  status?: string;\n}\n\nexport interface IOrdersData {\n  success: boolean;\n  orders: Array<IOrderData>;\n  total: number;\n  totalToday: number;\n}\n\nexport interface IOrderResponse {\n  number: number;\n}\n\nexport interface IErrorResponse {\n  status: number;\n  message: string;\n  stack: string;\n}\n\nexport enum ORDER_STATUSES {\n  DONE = \"done\",\n  PENDING = \"pending\",\n  CREATEDCrea = \"created\",\n  CANCEL = \"cancel\",\n}\n","import { FC, useEffect } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { useDrop } from \"react-dnd\";\n\nimport {\n  Button,\n  ConstructorElement,\n  CurrencyIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport DraggableElement from \"../draggable-element\";\n\nimport { useDispatch, useSelector } from \"../../services/hooks\";\n\nimport {\n  ADD_BUN,\n  ADD_INGREDIENT,\n  RESET_CONSTRUCTOR,\n} from \"../../services/actions/burger-constructor\";\n\nimport {\n  INCREASE_INGREDIENT_COUNT,\n  CLEAR_BUN_COUNT,\n  CLEAR_INGREDIENTS_COUNT,\n} from \"../../services/actions/burger-ingredients\";\n\nimport {\n  createOrder,\n  RESET_ORDER,\n  SET_ORDER_ITEMS,\n} from \"../../services/actions/order\";\nimport { ILocationState, IIngredientData } from \"../../services/types/data\";\n\nimport styles from \"./styles.module.css\";\n\nconst BurgerConstructor: FC = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const location = useLocation<ILocationState>();\n  const { isAuthorized } = useSelector((store) => store.auth);\n  const { bun, filling } = useSelector((store) => store.burger);\n  const { ingredients } = useSelector((store) => store.order);\n\n  let cost = filling.reduce((acc, item) => acc + item.price, 0);\n  if (bun) cost += 2 * bun.price;\n\n  const handleCreateOrder = () => {\n    if (isAuthorized) {\n      dispatch({ type: RESET_ORDER });\n      dispatch(createOrder({ ingredients }));\n      history.push({\n        pathname: \"/create-order\",\n        state: {\n          background: location,\n        },\n      });\n      dispatch({ type: RESET_CONSTRUCTOR });\n      dispatch({ type: CLEAR_INGREDIENTS_COUNT });\n    } else {\n      history.push(\"/login\");\n    }\n  };\n\n  const handleDrop = (element: IIngredientData) => {\n    if (element.type === \"bun\") {\n      dispatch({ type: CLEAR_BUN_COUNT });\n      dispatch({\n        type: ADD_BUN,\n        bun: element,\n      });\n      dispatch({\n        type: INCREASE_INGREDIENT_COUNT,\n        id: element._id,\n        qty: 2,\n      });\n    } else {\n      dispatch({\n        type: ADD_INGREDIENT,\n        item: element,\n      });\n      dispatch({\n        type: INCREASE_INGREDIENT_COUNT,\n        id: element._id,\n        qty: 1,\n      });\n    }\n  };\n\n  const [{ isHover }, dropTarget] = useDrop({\n    accept: \"item\",\n    collect: (monitor) => ({\n      isHover: monitor.isOver(),\n    }),\n    drop(item: IIngredientData) {\n      handleDrop(item);\n    },\n  });\n\n  const borderColor = isHover ? \"#2f2f37\" : \"transparent\";\n\n  useEffect(() => {\n    const order = filling.map((item) => item._id);\n    bun && order.push(bun._id);\n\n    dispatch({ type: SET_ORDER_ITEMS, order });\n  }, [dispatch, filling, bun]);\n\n  return (\n    <div className={`${styles.constructor} pl-4`}>\n      <div\n        className={`${styles.constructor__items} mb-10`}\n        style={{ border: `1px dashed ${borderColor}`, borderRadius: \"50px\" }}\n        ref={dropTarget}\n      >\n        {bun || filling.length > 0 ? (\n          <>\n            {bun ? (\n              <div className={`${styles.constructor__item} ml-8 mb-4`}>\n                <ConstructorElement\n                  type=\"top\"\n                  isLocked={true}\n                  price={bun?.price}\n                  text={`${bun?.name} (верх)`}\n                  thumbnail={bun?.image_mobile ? bun?.image_mobile : \"\"}\n                />\n              </div>\n            ) : (\n              /*TODO: стилизовать превью*/\n              <div\n                className=\"ml-2 mb-4 pt-2 pb-2 text\"\n                style={{ textAlign: \"center\" }}\n              >\n                Добавить булочку\n              </div>\n            )}\n\n            <div\n              className={`${styles[\"constructor__items-inner\"]} pr-2 scrollbar`}\n            >\n              {filling.length > 0 ? (\n                filling?.map((item, index) => (\n                  <DraggableElement item={item} index={index} key={index} />\n                ))\n              ) : (\n                /*TODO: стилизовать превью*/\n                <div\n                  className=\"ml-2 mb-4 pt-2 pb-2 text\"\n                  style={{ textAlign: \"center\" }}\n                >\n                  Добавить ингредиенты\n                </div>\n              )}\n            </div>\n\n            {bun ? (\n              <div\n                className={`${styles.constructor__item} ml-8`}\n                key={bun?._id}\n              >\n                <ConstructorElement\n                  type=\"bottom\"\n                  isLocked={true}\n                  price={bun?.price}\n                  text={`${bun?.name} (низ)`}\n                  thumbnail={bun?.image_mobile ? bun?.image_mobile : \"\"}\n                />\n              </div>\n            ) : (\n              /*TODO: стилизовать превью*/\n              <div\n                className=\"ml-2 mb-4 pt-2 pb-2 text\"\n                style={{ textAlign: \"center\" }}\n              >\n                Добавить булочку\n              </div>\n            )}\n          </>\n        ) : (\n          /*TODO: стилизовать превью*/\n          <div\n            className=\"ml-2 mb-4 pt-2 pb-2 text\"\n            style={{ textAlign: \"center\" }}\n          >\n            Перетащи сюда игредиенты и собери бургер\n          </div>\n        )}\n      </div>\n\n      {(bun || filling.length > 0) && (\n        <div className={`${styles.constructor__bottom} pr-4`}>\n          <div className={`${styles.constructor__cost} mr-10`}>\n            <span className=\"text text_type_digits-medium mr-2\">{cost}</span>\n            <CurrencyIcon type=\"primary\" />\n          </div>\n          <Button\n            type=\"primary\"\n            size=\"large\"\n            {...(bun && { onClick: handleCreateOrder })}\n          >\n            Оформить заказ\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default BurgerConstructor;\n","import { FC } from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\n\nimport BurgerIngredients from \"../../components/burger-ingredients\";\nimport BurgerConstructor from \"../../components/burger-constructor\";\n\nimport styles from \"./styles.module.css\";\n\nexport const MainPage: FC = () => {\n  return (\n    <>\n      <h1 className=\"text text_type_main-large mt-10 mb-5\">Соберите бургер</h1>\n      <div className={styles.main}>\n        <DndProvider backend={HTML5Backend}>\n          <BurgerIngredients />\n          <BurgerConstructor />\n        </DndProvider>\n      </div>\n    </>\n  );\n};\n","import { FC } from \"react\";\n\nimport { useSelector } from \"../../services/hooks\";\n\nimport styles from \"./styles.module.css\";\n\nconst IngredientDetails: FC = () => {\n  const { ingredient = null } = useSelector((store) => store.ingredient);\n\n  return (\n    <div className={styles.ingredient}>\n      {ingredient && (\n        <>\n          <img\n            className={`${styles.ingredient__image} mb-4`}\n            src={ingredient?.image_large ?? \"\"}\n            alt={ingredient?.name}\n            width=\"480px\"\n            height=\"240px\"\n          />\n          <h3 className=\"text text_type_main-medium mb-8\">\n            {ingredient?.name}\n          </h3>\n          <div className={styles.ingredient__items}>\n            <div className={`${styles.ingredient__item} mr-5`}>\n              <span className=\"text text_type_main-default text_color_inactive mb-2\">\n                Калории,ккал\n              </span>\n              <span className=\"text text_type_digits-default text_color_inactive\">\n                {ingredient?.calories}\n              </span>\n            </div>\n            <div className={`${styles.ingredient__item} mr-5`}>\n              <span className=\"text text_type_main-default text_color_inactive mb-2\">\n                Белки, г\n              </span>\n              <span className=\"text text_type_digits-default text_color_inactive\">\n                {ingredient?.proteins}\n              </span>\n            </div>\n            <div className={`${styles.ingredient__item} mr-5`}>\n              <span className=\"text text_type_main-default text_color_inactive mb-2\">\n                Жиры, г\n              </span>\n              <span className=\"text text_type_digits-default text_color_inactive\">\n                {ingredient?.fat}\n              </span>\n            </div>\n            <div className={styles.ingredient__item}>\n              <span className=\"text text_type_main-default text_color_inactive mb-2\">\n                Углеводы, г\n              </span>\n              <span className=\"text text_type_digits-default text_color_inactive\">\n                {ingredient?.carbohydrates}\n              </span>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default IngredientDetails;\n","import { FC, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport IngredientDetails from \"../../components/ingredient-details\";\nimport { SELECT_INGREDIENT } from \"../../services/actions/ingredient-details\";\nimport { useDispatch, useSelector } from \"../../services/hooks\";\n\nimport styles from \"./styles.module.css\";\n\nexport const IngredientPage: FC = () => {\n  const dispatch = useDispatch();\n  const { ingredients } = useSelector((store) => store.ingredients);\n  const { ingredientId } = useParams();\n\n  useEffect(() => {\n    dispatch({\n      type: SELECT_INGREDIENT,\n      ingredient: ingredients.find((item) => item._id === ingredientId),\n    });\n  }, [dispatch, ingredients, ingredientId]);\n\n  return (\n    <div className={styles.ingredient}>\n      <h1 className=\"text text_type_main-large mt-10 mb-5\">\n        Детали ингредиента\n      </h1>\n      <IngredientDetails />\n    </div>\n  );\n};\n","import { IOrderData } from \"../types/data\";\n\nexport const WS_CONNECTION_START = \"WS_CONNECTION_START\" as const;\nexport const WS_CONNECTION_SUCCESS = \"WS_CONNECTION_SUCCESS\" as const;\nexport const WS_CONNECTION_ERROR = \"WS_CONNECTION_ERROR\" as const;\nexport const WS_CONNECTION_CLOSED = \"WS_CONNECTION_CLOSED\" as const;\nexport const WS_GET_MESSAGE = \"WS_GET_MESSAGE\" as const;\n\nexport interface IWSConnectionStart {\n  readonly type: typeof WS_CONNECTION_START;\n  readonly payload: string;\n}\n\nexport interface IWSConnectionSuccess {\n  readonly type: typeof WS_CONNECTION_SUCCESS;\n}\n\nexport interface IWSConnectionError {\n  readonly type: typeof WS_CONNECTION_ERROR;\n}\n\nexport interface IWSConnectionClosed {\n  readonly type: typeof WS_CONNECTION_CLOSED;\n}\n\nexport interface IWSGetMessage {\n  readonly type: typeof WS_GET_MESSAGE;\n  readonly payload: {\n    orders: Array<IOrderData>;\n    total: number;\n    totalToday: number;\n  };\n}\n\nexport type TWSActions =\n  | IWSConnectionStart\n  | IWSConnectionSuccess\n  | IWSConnectionError\n  | IWSConnectionClosed\n  | IWSGetMessage;\n","type RelativeTimeFormatUnit =\n  | \"year\"\n  | \"years\"\n  | \"quarter\"\n  | \"quarters\"\n  | \"month\"\n  | \"months\"\n  | \"week\"\n  | \"weeks\"\n  | \"day\"\n  | \"days\"\n  | \"hour\"\n  | \"hours\"\n  | \"minute\"\n  | \"minutes\"\n  | \"second\"\n  | \"seconds\";\n\nexport const presentInteger = (number: number): string => {\n  return new Intl.NumberFormat(\"en-US\", { signDisplay: \"exceptZero\" }).format(\n    number\n  );\n};\n\nexport const formatTimeAgo = (date: string): string | undefined => {\n  const formatter = new Intl.RelativeTimeFormat(undefined, {\n    numeric: \"auto\",\n  });\n\n  const DIVISIONS: Array<{ amount: number; name: RelativeTimeFormatUnit }> = [\n    { amount: 60, name: \"minutes\" },\n    { amount: 24, name: \"hours\" },\n    { amount: 7, name: \"days\" },\n    { amount: 4.34524, name: \"weeks\" },\n    { amount: 12, name: \"months\" },\n    { amount: Number.POSITIVE_INFINITY, name: \"years\" },\n  ];\n\n  const dateParse = new Date(date);\n  const hours = dateParse.getHours();\n  const minutes = dateParse.getMinutes();\n  const UTC = -(dateParse.getTimezoneOffset() / 60);\n\n  let duration = (dateParse.getTime() - new Date().getTime()) / 60000;\n\n  for (let i = 0; i <= DIVISIONS.length; i++) {\n    const division: { amount: number; name: RelativeTimeFormatUnit } =\n      DIVISIONS[i];\n    if (Math.abs(duration) < division.amount) {\n      return (\n        formatter.format(Math.round(duration), division.name) +\n        \", \" +\n        hours +\n        \":\" +\n        minutes +\n        \" i-GMT\" +\n        presentInteger(UTC)\n      );\n    }\n    duration /= division.amount;\n  }\n};\n","import { FC } from \"react\";\n\nimport { IProps } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nconst IngredientAvatar: FC<IProps> = ({ image = \"\", alt = \"\" }) => {\n  return (\n    <div className={styles.avatar}>\n      <img src={image} alt={alt} className={styles.img} />\n    </div>\n  );\n};\n\nexport default IngredientAvatar;\n","import { FC } from \"react\";\n\nimport IngredientAvatar from \"../ingregient-avatar\";\n\nimport { IProps } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nconst IngredientAvatars: FC<IProps> = ({ items, max }) => (\n  <div className={styles.avatars}>\n    {items && items.length > max && (\n      <div\n        className={styles[\"avatar-wrap\"]}\n        key={items[items.length - max]?._id}\n      >\n        <div className={styles.bg}></div>\n        <IngredientAvatar\n          image={items[items.length - max]?.image_mobile}\n          alt={items[items.length - max]?.name}\n        />\n        <span className={`${styles.more} text text_type_digits-default`}>\n          {`+${items.length - max}`}\n        </span>\n      </div>\n    )}\n    {items &&\n      items.slice(0, max).map((item) => (\n        <div className={styles[\"avatar-wrap\"]} key={item?._id}>\n          <IngredientAvatar image={item?.image_mobile} alt={item?.name} />\n        </div>\n      ))}\n  </div>\n);\n\nexport default IngredientAvatars;\n","import { FC, useMemo } from \"react\";\nimport { useHistory, useLocation, useRouteMatch } from \"react-router-dom\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport { formatTimeAgo } from \"../../utils/formatTimeAgo\";\nimport IngredientAvatars from \"../../components/ingregient-avatars\";\nimport { useSelector } from \"../../services/hooks\";\nimport { SELECT_ORDER } from \"../../services/actions/order\";\nimport { useDispatch } from \"../../services/hooks\";\nimport { ILocationState, IIngredientData } from \"../../services/types/data\";\n\nimport { IProps } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nconst Order: FC<IProps> = ({ order, isUserOrder = false }) => {\n  const { url } = useRouteMatch();\n  const history = useHistory();\n  const location = useLocation<ILocationState>();\n  const dispatch = useDispatch();\n  const { ingredients } = useSelector((store) => store.ingredients);\n\n  const uniqueOrderIngredients = Array.from(new Set(order.ingredients)).filter(\n    Boolean\n  );\n\n  const orderIngredients: Array<IIngredientData | undefined> = useMemo(() => {\n    return uniqueOrderIngredients.map((ingredient) => {\n      return ingredients.find((item) => item._id === ingredient);\n    });\n  }, [ingredients, uniqueOrderIngredients]);\n\n  const orderPrice = orderIngredients.reduce((acc, current) => {\n    if (current && current.type === \"bun\") {\n      acc += current.price * 2;\n    } else if (current) {\n      acc += current.price;\n    }\n    return acc;\n  }, 0);\n\n  const handleCardDetail = (id: string) => {\n    dispatch({\n      type: SELECT_ORDER,\n      order: order,\n    });\n    history.push({\n      pathname: `${url}/${id}`,\n      state: { background: location },\n    });\n  };\n\n  return (\n    <article\n      onClick={() => handleCardDetail(order?._id)}\n      className={`${styles.order} mb-6`}\n    >\n      <div className={`${styles.info} mb-6`}>\n        <span className=\"text text_type_digits-default\">#{order.number}</span>\n        <span className=\"text text_type_main-default text_color_inactive\">\n          {formatTimeAgo(order.createdAt)}\n        </span>\n      </div>\n      <h3 className=\"text text_type_main-medium mb-6\">{order.name}</h3>\n      {order.status && isUserOrder && (\n        <div className={`${styles.status} text text_type_main-default mb-6`}>\n          {order.status === \"done\" && (\n            <span className={styles.status_done}>Выполнен</span>\n          )}\n\n          {order.status === \"pending\" && <span>Готовится</span>}\n\n          {order.status === \"сreated\" && <span>Создан</span>}\n        </div>\n      )}\n\n      <div className={styles.details}>\n        {orderIngredients && orderIngredients.length && (\n          <IngredientAvatars items={orderIngredients} max={5} />\n        )}\n        <div className={styles.price}>\n          <span className=\"text text_type_digits-default mr-2\">\n            {orderPrice}\n          </span>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </article>\n  );\n};\n\nexport default Order;\n","import { FC } from \"react\";\n\nimport Order from \"../../components/order\";\nimport { IProps } from \"./types\";\n\nimport styles from \"./styles.module.css\";\n\nconst OrdersFeed: FC<IProps> = ({ orders, isUserOrder = false }) => {\n  return (\n    <div className={`${styles[\"orders-feed\"]} scrollbar`}>\n      {orders.map((order) => (\n        <Order order={order} key={order.number} isUserOrder={isUserOrder} />\n      ))}\n    </div>\n  );\n};\n\nexport default OrdersFeed;\n","import { FC } from \"react\";\n\nimport { IProps } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nconst OrdersSummary: FC<IProps> = ({\n  ordersReady = [],\n  ordersInProgress = [],\n  total,\n  totalToday,\n}) => {\n  return (\n    <div className={styles.summary}>\n      <div className={styles.orders}>\n        {ordersReady.length > 0 && (\n          <div className={styles[\"orders-in-progress\"]}>\n            <div className=\"text text_type_main-medium\">Готовы:</div>\n            {ordersReady.map(\n              (order) =>\n                order.status === \"done\" && (\n                  <div\n                    className=\"text text_type_digits-default mb-2\"\n                    key={order._id}\n                  >\n                    {order.number}\n                  </div>\n                )\n            )}\n          </div>\n        )}\n\n        <div className={styles[\"orders-in-done\"]}>\n          <div className=\"text text_type_main-medium\">В работе:</div>\n          {ordersInProgress.length > 0\n            ? ordersInProgress.map(\n                (order) =>\n                  order.status === \"pending\" && (\n                    <div\n                      className=\"text text_type_digits-default mb-2\"\n                      key={order.number}\n                    >\n                      {order.number}\n                    </div>\n                  )\n              )\n            : \"нет заказов\"}\n        </div>\n      </div>\n\n      <div className=\"text text_type_main-medium\">Выполнено за все время:</div>\n      <div\n        className={`${styles[\"text-shadow\"]} text text_type_digits-large mb-15`}\n      >\n        {total}\n      </div>\n      <div className=\"text text_type_main-medium\">Выполнено за сегодня:</div>\n      <div className={`${styles[\"text-shadow\"]} text text_type_digits-large`}>\n        {totalToday}\n      </div>\n    </div>\n  );\n};\n\nexport default OrdersSummary;\n","import { FC, useEffect, useMemo } from \"react\";\n\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_CLOSED,\n} from \"../../services/actions/wsActions\";\nimport { WSS_API_ORDERS } from \"../../utils/constants\";\nimport { ORDER_STATUSES } from \"../../services/types/data\";\nimport OrdersFeed from \"../../components/orders-feed\";\nimport OrdersSummary from \"../../components/orders-summary\";\n\nimport { useDispatch, useSelector } from \"../../services/hooks\";\n\nimport styles from \"./styles.module.css\";\n\nexport const FeedPage: FC = () => {\n  const dispatch = useDispatch();\n\n  const { wsError, wsConnected, orders, total, totalToday } = useSelector(\n    (store) => store.ordersFeed\n  );\n\n  const ordersData = useMemo(() => orders, [orders]);\n\n  const ordersReady = useMemo(\n    () =>\n      orders\n        .filter(({ status }) => status === ORDER_STATUSES.DONE)\n        .slice(0, 10),\n    [orders]\n  );\n  const ordersInProgress = useMemo(\n    () =>\n      orders\n        .filter(({ status }) => status === ORDER_STATUSES.PENDING)\n        .slice(0, 10),\n    [orders]\n  );\n\n  useEffect(() => {\n    dispatch({\n      type: WS_CONNECTION_START,\n      payload: WSS_API_ORDERS,\n    });\n    return () => {\n      dispatch({\n        type: WS_CONNECTION_CLOSED,\n      });\n    };\n  }, [dispatch]);\n\n  return (\n    <>\n      <h1 className=\"text text_type_main-large mt-10 mb-5\">Лента заказов</h1>\n      <div className={styles.feed}>\n        {!wsError && wsConnected && orders.length === 0 && (\n          <h3 className=\"text text_type_main-default mt-10 mb-5\">\n            ...загрузка\n          </h3>\n        )}\n        {!wsError && wsConnected && orders && orders.length > 0 && (\n          <>\n            <OrdersFeed orders={ordersData} />\n            <OrdersSummary\n              ordersReady={ordersReady}\n              ordersInProgress={ordersInProgress}\n              total={total}\n              totalToday={totalToday}\n            />\n          </>\n        )}\n        {wsError && (\n          <h3 className=\"text text_type_main-default mt-10 mb-5\">\n            Произошла ошибка. Проверьте интернет-подключение.\n          </h3>\n        )}\n      </div>\n    </>\n  );\n};\n","import { FC } from \"react\";\n\nimport { IProps } from \"./types\";\n\nimport styles from \"./styles.module.css\";\n\nexport const Form: FC<IProps> = (props) => (\n  <form {...props} className={styles.wrapper} />\n);\n","import * as privateApi from \"./core/privateApi\";\n\nimport {\n  IUserResponse,\n  IUserUpdateParams\n} from \"../../services/types/data\";\n\nexport function getUser(): Promise<IUserResponse> {\n  return privateApi.get(\"auth/user\").then((response) => response.user);\n}\n\nexport function updateUser(params: IUserUpdateParams): Promise<IUserResponse> {\n  return privateApi.patch(\"auth/user\", params).then((response) => response.user);\n};\n","import * as authService from \"../../api/http/auth\";\nimport * as userService from \"../../api/http/user\";\n\nimport { AppThunk, AppDispatch } from \"../types\";\nimport { IErrorResponse, IUserResponse } from \"../types/data\";\n\nexport const LOGIN_REQUEST = \"LOGIN_REQUEST\" as const;\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\" as const;\nexport const LOGIN_FAILED = \"LOGIN_FAILED\" as const;\n\nexport const LOGOUT_REQUEST = \"LOGOUT_REQUEST\" as const;\nexport const LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\" as const;\nexport const LOGOUT_FAILED = \"LOGOUT_FAILED\" as const;\n\nexport const REGISTRATION_REQUEST = \"REGISTRATION_USER_REQUEST\" as const;\nexport const REGISTRATION_SUCCESS = \"REGISTRATION_USER_SUCCESS\" as const;\nexport const REGISTRATION_FAILED = \"REGISTRATION_USER_FAILED\" as const;\n\nexport const USER_REQUEST = \"USER_REQUEST\" as const;\nexport const USER_SUCCESS = \"USER_SUCCESS\" as const;\nexport const USER_FAILED = \"USER_FAILED\" as const;\n\nexport const FORGOT_PASSWORD_REQUEST = \"FORGOT_PASSWORD_REQUEST\" as const;\nexport const FORGOT_PASSWORD_SUCCESS = \"FORGOT_PASSWORD_SUCCESS\" as const;\nexport const FORGOT_PASSWORD_FAILED = \"FORGOT_PASSWORD_FAILED\" as const;\n\nexport const RESET_PASSWORD_REQUEST = \"RESET_PASSWORD_REQUEST\" as const;\nexport const RESET_PASSWORD_SUCCESS = \"RESET_PASSWORD_SUCCESS\" as const;\nexport const RESET_PASSWORD_FAILED = \"RESET_PASSWORD_FAILED\" as const;\n\nexport const UPDATE_TOKEN_REQUEST = \"UPDATE_TOKEN_REQUEST\" as const;\nexport const UPDATE_TOKEN_SUCCESS = \"UPDATE_TOKEN_SUCCESS\" as const;\nexport const UPDATE_TOKEN_FAILED = \"UPDATE_TOKEN_FAILED\" as const;\n\nexport interface ILoginRequest {\n  readonly type: typeof LOGIN_REQUEST;\n}\nexport interface ILoginSuccess {\n  readonly type: typeof LOGIN_SUCCESS;\n  readonly user: IUserResponse;\n}\nexport interface ILoginFailed {\n  readonly type: typeof LOGIN_FAILED;\n  readonly error: IErrorResponse;\n}\n\nexport interface ILogoutRequest {\n  readonly type: typeof LOGOUT_REQUEST;\n}\nexport interface ILogoutSuccess {\n  readonly type: typeof LOGOUT_SUCCESS;\n}\nexport interface ILogoutFailed {\n  readonly type: typeof LOGOUT_FAILED;\n}\n\nexport interface IRegistartionRequest {\n  readonly type: typeof REGISTRATION_REQUEST;\n}\nexport interface IRegistartionSuccess {\n  readonly type: typeof REGISTRATION_SUCCESS;\n  readonly user: IUserResponse;\n}\nexport interface IRegistartionFailed {\n  readonly type: typeof REGISTRATION_FAILED;\n  readonly error: IErrorResponse;\n}\n\nexport interface IUserRequest {\n  readonly type: typeof USER_REQUEST;\n}\nexport interface IUserSuccess {\n  readonly type: typeof USER_SUCCESS;\n  readonly user: IUserResponse;\n}\nexport interface IUserFailed {\n  readonly type: typeof USER_FAILED;\n  readonly error: IErrorResponse;\n}\n\nexport interface IForgotPasswordRequest {\n  readonly type: typeof FORGOT_PASSWORD_REQUEST;\n}\nexport interface IForgotPasswordSuccess {\n  readonly type: typeof FORGOT_PASSWORD_SUCCESS;\n}\nexport interface IForgotPasswordFailed {\n  readonly type: typeof FORGOT_PASSWORD_FAILED;\n}\n\nexport interface IResetPasswordRequest {\n  readonly type: typeof RESET_PASSWORD_REQUEST;\n}\nexport interface IResetPasswordSuccess {\n  readonly type: typeof RESET_PASSWORD_SUCCESS;\n}\nexport interface IResetPasswordFailed {\n  readonly type: typeof RESET_PASSWORD_FAILED;\n}\n\nexport interface IUpdateTokenRequest {\n  readonly type: typeof UPDATE_TOKEN_REQUEST;\n}\nexport interface IUpdateTokenSuccess {\n  readonly type: typeof UPDATE_TOKEN_SUCCESS;\n}\nexport interface IUpdateTokenFailed {\n  readonly type: typeof UPDATE_TOKEN_FAILED;\n}\n\nexport type TAuthActions =\n  | ILoginRequest\n  | ILoginSuccess\n  | ILoginFailed\n  | ILogoutRequest\n  | ILogoutSuccess\n  | ILogoutFailed\n  | IRegistartionRequest\n  | IRegistartionSuccess\n  | IRegistartionFailed\n  | IUserRequest\n  | IUserSuccess\n  | IUserFailed\n  | IForgotPasswordRequest\n  | IForgotPasswordSuccess\n  | IForgotPasswordFailed\n  | IResetPasswordRequest\n  | IResetPasswordSuccess\n  | IResetPasswordFailed\n  | IUpdateTokenRequest\n  | IUpdateTokenSuccess\n  | IUpdateTokenFailed;\n\nexport const registration: AppThunk =\n  (formValues) => (dispatch: AppDispatch) => {\n    dispatch({\n      type: REGISTRATION_REQUEST,\n    });\n\n    return authService\n      .registration(formValues)\n      .then((user) => dispatch({ type: REGISTRATION_SUCCESS, user }))\n      .catch((error) => dispatch({ type: REGISTRATION_FAILED, error }));\n  };\n\nexport const login: AppThunk = (formValues) => (dispatch: AppDispatch) => {\n  dispatch({\n    type: LOGIN_REQUEST,\n  });\n\n  return authService\n    .login(formValues)\n    .then((user) => dispatch({ type: LOGIN_SUCCESS, user }))\n    .catch((error) => dispatch({ type: LOGIN_FAILED, error }));\n};\n\nexport const logout: AppThunk = () => (dispatch: AppDispatch) => {\n  dispatch({\n    type: LOGOUT_REQUEST,\n  });\n\n  return authService\n    .logout()\n    .then(() => dispatch({ type: LOGOUT_SUCCESS }))\n    .catch(() => dispatch({ type: LOGOUT_FAILED }));\n};\n\nexport const forgotPassword: AppThunk =\n  (formValues) => (dispatch: AppDispatch) => {\n    dispatch({\n      type: FORGOT_PASSWORD_REQUEST,\n    });\n\n    return authService\n      .forgotPassword(formValues)\n      .then(() => dispatch({ type: FORGOT_PASSWORD_SUCCESS }))\n      .catch(() => dispatch({ type: FORGOT_PASSWORD_FAILED }));\n  };\n\nexport const resetPassword: AppThunk =\n  (formValues) => (dispatch: AppDispatch) => {\n    dispatch({\n      type: RESET_PASSWORD_REQUEST,\n    });\n\n    return authService\n      .resetPassword(formValues)\n      .then(() => dispatch({ type: RESET_PASSWORD_SUCCESS }))\n      .catch(() => dispatch({ type: RESET_PASSWORD_FAILED }));\n  };\n\nexport const getUser: AppThunk = () => (dispatch: AppDispatch) => {\n  dispatch({\n    type: USER_REQUEST,\n  });\n\n  return userService\n    .getUser()\n    .then((user) => dispatch({ type: USER_SUCCESS, user }))\n    .catch((error) => dispatch({ type: USER_FAILED, error }));\n};\n\nexport const updateUser: AppThunk = (formValues) => (dispatch: AppDispatch) => {\n  dispatch({\n    type: USER_REQUEST,\n  });\n\n  return userService\n    .updateUser(formValues)\n    .then((user) => dispatch({ type: USER_SUCCESS, user }))\n    .catch((error) => dispatch({ type: USER_FAILED, error }));\n};\n","import * as publicApi from \"./core/publicApi\";\n\nimport {\n  IForgotPasswordParams,\n  ILoginParams,\n  IRegistrationParams,\n  IResetPasswordParams,\n  IUserResponse,\n} from \"../../services/types/data\";\n\nexport function registration(params: IRegistrationParams): Promise<IUserResponse> {\n  return publicApi.post(\"auth/register\", params).then((response) => {\n    localStorage.setItem(\"refreshToken\", response.refreshToken);\n    localStorage.setItem(\"accessToken\", response.accessToken);\n\n    return response.user;\n  });\n}\n\nexport function login(params: ILoginParams): Promise<IUserResponse> {\n  return publicApi.post(\"auth/login\", params).then((response) => {\n    localStorage.setItem(\"refreshToken\", response.refreshToken);\n    localStorage.setItem(\"accessToken\", response.accessToken);\n\n    return response.user;\n  });\n}\n\nexport function logout(): Promise<void> {\n  const refreshToken = localStorage.getItem(\"refreshToken\") ?? \"\";\n\n  return publicApi.post(\"auth/logout\", { token: refreshToken }).then(() => {\n    localStorage.removeItem(\"refreshToken\");\n    localStorage.removeItem(\"accessToken\");\n  });\n}\n\nexport function forgotPassword(params: IForgotPasswordParams): Promise<void> {\n  return publicApi.post(\"password-reset\", params);\n}\n\nexport function resetPassword(params: IResetPasswordParams): Promise<void> {\n  return publicApi.post(\"password-reset/reset\", params);\n}\n","import { ChangeEvent, FormEvent, FC, useState } from \"react\";\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\n\nimport {\n  Button,\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport { Form } from \"../../components/form\";\nimport { login } from \"../../services/actions/auth\";\nimport { ILoginParams } from \"../../services/types/data\";\nimport { useDispatch, useSelector } from \"../../services/hooks\";\n\nimport styles from \"./styles.module.css\";\n\nexport const LoginPage: FC = () => {\n  const { state } = useLocation();\n  const dispatch = useDispatch();\n  const { isAuthorized, isError, error } = useSelector((store) => store.auth);\n\n  const [values, setFormValues] = useState<ILoginParams>({\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setFormValues((prevState) => {\n      return { ...prevState, [event.target.name]: event.target.value };\n    });\n  };\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    await dispatch(login(values));\n  };\n\n  if (isAuthorized) {\n    return <Redirect to={state?.from || \"/\"} />;\n  }\n\n  return (\n    <div className={styles.page}>\n      <h3 className=\"text text_type_main-medium mb-6\">Вход</h3>\n      <Form onSubmit={handleSubmit}>\n        <Input\n          type=\"email\"\n          placeholder=\"E-mail\"\n          name=\"email\"\n          value={values.email}\n          onChange={handleChange}\n        />\n        <PasswordInput\n          name=\"password\"\n          value={values.password}\n          onChange={handleChange}\n        />\n        <Button type=\"primary\" size=\"medium\">\n          Войти\n        </Button>\n      </Form>\n\n      {isError && (\n        <p className={`${styles.error} text text_type_main-default mt-6`}>\n          {error?.message}\n        </p>\n      )}\n\n      <div className={`${styles.links} mt-20 mb-4`}>\n        <p className=\"text text_type_main-default text_color_inactive mr-1\">\n          Вы — новый пользователь?\n        </p>\n        <Link\n          to=\"/register\"\n          className={`${styles.link} text text_type_main-default`}\n        >\n          Зарегистрироваться\n        </Link>\n      </div>\n      <div className={styles.links}>\n        <p className=\"text text_type_main-default text_color_inactive mr-1\">\n          Забыли пароль?\n        </p>\n        <Link\n          to=\"/forgot-password\"\n          className={`${styles.link} text text_type_main-default`}\n        >\n          Восстановить пароль\n        </Link>\n      </div>\n    </div>\n  );\n};\n","import { FC, useMemo } from \"react\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport IngredientAvatar from \"../ingregient-avatar\";\nimport { formatTimeAgo } from \"../../utils/formatTimeAgo\";\nimport { getCountsValues } from \"../../utils/getCountsValues\";\nimport { useSelector } from \"../../services/hooks\";\nimport styles from \"./styles.module.css\";\n\nconst FeedDetails: FC = () => {\n  const { order = null } = useSelector((store) => store.order);\n  const { ingredients } = useSelector((store) => store.ingredients);\n  \n  const allOrderIngredients = useMemo(() => {\n    return order?.ingredients.map((ingredient) => {\n      return ingredients.find((item) => item._id === ingredient);\n    });\n  }, [ingredients, order?.ingredients]);\n\n  const uniqueOrderIngredients = useMemo(() => {\n    return Array.from(new Set(order?.ingredients)).filter(Boolean).map((ingredient) => {\n      return ingredients.find((item) => item._id === ingredient);\n    });\n  }, [ingredients, order?.ingredients]);\n\n  const price = useMemo(() => {\n    return allOrderIngredients?.reduce((acc, item) => {\n      if (item && item.type === \"bun\") {\n        acc += item && item.price * 2;\n      } else if (item) {\n        acc += item && item.price;\n      }\n      return acc;\n    }, 0);\n  }, [allOrderIngredients]);\n\n  const countsIngredients = getCountsValues(order?.ingredients)\n\n  return (\n    <>\n      <div className={`${styles.feed}`}>\n        <div className={`text text_type_digits-default ${styles.title}`}>\n          #{order?.number}\n        </div>\n        <div className={`text text_type_main-medium  mt-10`}>{order?.name}</div>\n        {order?.status && (\n          <div\n            className={`${styles.status} ${\n              order?.status === \"done\" && styles.status_done\n            }  text text_type_main-default`}\n          >\n            {order?.status === \"done\" && <>Выполнен</>}\n            {order?.status === \"pending\" && <>Готовится</>}\n            {order?.status === \"сreated\" && <>Создан</>}\n          </div>\n        )}\n        <div className={`text text_type_main-medium mt-15 mb-6`}>Состав:</div>\n        <div className={`${styles.ingredients} custom-scroll`}>\n          {uniqueOrderIngredients &&\n            uniqueOrderIngredients.map((item, index) => {\n              return (\n                <div key={index} className={`${styles.ingredient}`}>\n                  <div className={`${styles.ingredient__info}`}>\n                    <IngredientAvatar\n                      image={item?.image_mobile}\n                      alt={item?.name}\n                    />\n                    <p className=\"text text_type_main-default ml-4\">\n                      {item?.name}\n                    </p>\n                  </div>\n\n                  <div className={`${styles.ingredient__price}`}>\n                    <span className={`text text_type_digits-default mr-2`}>\n                      {item?.type === \"bun\"\n                        ? 2\n                        :  countsIngredients.get(item?._id) ?? \"\"\n                      } x {item?.price}\n                    </span>\n                    <CurrencyIcon type=\"primary\" />\n                  </div>\n                </div>\n              );\n            })}\n        </div>\n        <div className={`${styles.feed__footer}`}>\n          <div\n            className={`text text_type_main-default ml-4 text_color_inactive`}\n          >\n            {order?.createdAt && formatTimeAgo(order?.createdAt)}\n          </div>\n          <div className={`total__${styles.ingredient__price}`}>\n            <span className={`text text_type_digits-default mr-2`}>\n              {price}\n            </span>\n            <CurrencyIcon type=\"primary\" />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default FeedDetails;\n","export function getCountsValues(arr) {\n  var counts = new Map();\n\n  for (var i in arr) {\n    if (counts.has(arr[i])) {\n      counts.set(arr[i], counts.get(arr[i]) + 1);\n    } else {\n      counts.set(arr[i], 1);\n    }\n  }\n  return counts;\n}\n","import { FC, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_CLOSED,\n} from \"../../services/actions/wsActions\";\nimport { WSS_API_ORDERS, WSS_API_USER_ORDERS } from \"../../utils/constants\";\nimport { SELECT_ORDER } from \"../../services/actions/order\";\nimport { useDispatch, useSelector } from \"../../services/hooks\";\nimport FeedDetails from \"../../components/feed-details\";\n\nimport { IProps } from \"./types\";\n\nimport styles from \"./styles.module.css\";\n\nexport const OrderPage: FC<IProps> = ({ isUserOrder }) => {\n  const dispatch = useDispatch();\n  const { wsConnected, wsError, orders } = useSelector(\n    (store) => store.ordersFeed\n  );\n  const { orderId } = useParams();\n\n  useEffect(() => {\n    const accessToken = localStorage\n      .getItem(\"accessToken\")\n      ?.replace(\"Bearer \", \"\")\n      .trim();\n\n    dispatch({\n      type: WS_CONNECTION_START,\n      payload: isUserOrder\n        ? `${WSS_API_USER_ORDERS}?token=${accessToken}`\n        : WSS_API_ORDERS,\n    });\n\n    return () => {\n      dispatch({\n        type: WS_CONNECTION_CLOSED,\n      });\n    };\n  }, [dispatch, isUserOrder]);\n\n  useEffect(() => {\n    dispatch({\n      type: SELECT_ORDER,\n      order: orders.find((order) => order._id === orderId),\n    });\n  }, [dispatch, orders, orderId]);\n\n  return (\n    <div className={styles.order}>\n      {!wsError && wsConnected && orders.length === 0 && (\n        <h3 className=\"text text_type_main-default mt-10 mb-5\">...загрузка</h3>\n      )}\n      {!wsError && wsConnected && orders && orders.length > 0 && (\n        <FeedDetails />\n      )}\n      {wsError && (\n        <h3 className=\"text text_type_main-default mt-10 mb-5\">\n          Произошла ошибка. Проверьте интернет-подключение.\n        </h3>\n      )}\n    </div>\n  );\n};\n","import { ChangeEvent, FormEvent, FC, useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nimport {\n  Button,\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport { Form } from \"../../components/form\";\nimport { registration } from \"../../services/actions/auth\";\nimport { IRegistrationParams } from \"../../services/types/data\";\nimport { useDispatch, useSelector } from \"../../services/hooks\";\n\nimport styles from \"./styles.module.css\";\n\nexport const RegisterPage: FC = () => {\n  const dispatch = useDispatch();\n  const { isAuthorized, isError, error } = useSelector((store) => store.auth);\n\n  const [values, setFormValues] = useState<IRegistrationParams>({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setFormValues((prevState) => {\n      return { ...prevState, [event.target.name]: event.target.value };\n    });\n  };\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    await dispatch(registration(values));\n  };\n\n  if (isAuthorized) {\n    return <Redirect to={{ pathname: \"/\" }} />;\n  }\n\n  return (\n    <div className={styles.page}>\n      <h3 className=\"text text_type_main-medium mb-6\">Регистрация</h3>\n      <Form onSubmit={handleSubmit}>\n        <Input\n          placeholder=\"Имя\"\n          name=\"name\"\n          value={values.name}\n          onChange={handleChange}\n        />\n        <Input\n          type=\"email\"\n          placeholder=\"E-mail\"\n          name=\"email\"\n          value={values.email}\n          onChange={handleChange}\n        />\n        <PasswordInput\n          name=\"password\"\n          value={values.password}\n          onChange={handleChange}\n        />\n        <Button type=\"primary\" size=\"medium\">\n          Регистрация\n        </Button>\n      </Form>\n\n      {isError && (\n        <p className={`${styles.error} text text_type_main-default mt-6`}>\n          {error?.message}\n        </p>\n      )}\n\n      <div className={`${styles.links} mt-20 mb-4`}>\n        <p className=\"text text_type_main-default text_color_inactive mr-1\">\n          Уже зарегистрированы?\n        </p>\n        <Link\n          to=\"/login\"\n          className={`${styles.link} text text_type_main-default`}\n        >\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n};\n","import { ChangeEvent, FormEvent, FC, useState } from \"react\";\nimport { Link, Redirect, useHistory, useLocation } from \"react-router-dom\";\n\nimport {\n  Button,\n  Input,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport { Form } from \"../../components/form\";\nimport { forgotPassword } from \"../../services/actions/auth\";\nimport { IForgotPasswordParams } from \"../../services/types/data\";\nimport { useDispatch, useSelector } from \"../../services/hooks\";\n\nimport styles from \"./styles.module.css\";\n\nexport const ForgotPassword: FC = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const { isAuthorized } = useSelector((store) => store.auth);\n\n  const [values, setFormValues] = useState<IForgotPasswordParams>({\n    email: \"\",\n  });\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setFormValues((prevState) => {\n      return { ...prevState, [event.target.name]: event.target.value };\n    });\n  };\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    await dispatch(forgotPassword(values));\n    history.replace({\n      pathname: \"/reset-password\",\n      state: {\n        from: location,\n      },\n    });\n  };\n\n  if (isAuthorized) {\n    return (\n      <Redirect\n        to={{\n          pathname: \"/\",\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className={styles.page}>\n      <h3 className=\"text text_type_main-medium mb-6\">Восстановление пароля</h3>\n      <Form onSubmit={handleSubmit}>\n        <Input\n          type=\"email\"\n          placeholder=\"Укажите e-mail\"\n          name=\"email\"\n          value={values.email}\n          onChange={handleChange}\n        />\n        <Button type=\"primary\" size=\"medium\">\n          Восстановить\n        </Button>\n      </Form>\n\n      <div className={`${styles.links} mt-20`}>\n        <p className=\"text text_type_main-default text_color_inactive mr-1\">\n          Вспомнили пароль?\n        </p>\n        <Link\n          to=\"/login\"\n          className={`${styles.link} text text_type_main-default`}\n        >\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n};\n","import { ChangeEvent, FormEvent, FC, useEffect, useRef, useState } from \"react\";\nimport { Link, Redirect, useHistory, useLocation } from \"react-router-dom\";\n\nimport {\n  Button,\n  Input,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport { Form } from \"../../components/form\";\nimport { resetPassword } from \"../../services/actions/auth\";\nimport { IResetPasswordParams } from \"../../services/types/data\";\nimport { useDispatch, useSelector } from \"../../services/hooks\";\n\nimport styles from \"./styles.module.css\";\n\nexport const ResetPassword: FC = () => {\n  const { state } = useLocation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { isAuthorized, isReset } = useSelector((store) => store.auth);\n  const [type, setType] = useState(false);\n  const passwordRef = useRef<HTMLInputElement>(null);\n  const onPassIconClick = (inputRef) => {\n    setType(!type);\n    inputRef.current.focus();\n  };\n\n  const [values, setFormValues] = useState<IResetPasswordParams>({\n    password: \"\",\n    token: \"\",\n  });\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setFormValues((prevState) => {\n      return { ...prevState, [event.target.name]: event.target.value };\n    });\n  };\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    await dispatch(resetPassword(values));\n    history.replace({\n      pathname: \"/login\",\n    });\n  };\n\n  useEffect(() => {\n    // Moving cursor to the end\n    if (passwordRef && passwordRef.current) {\n      passwordRef.current.selectionStart = passwordRef.current.value.length;\n      passwordRef.current.selectionEnd = passwordRef.current.value.length;\n    }\n  }, [type]);\n\n  if (isAuthorized) {\n    return <Redirect to={state?.from || \"/\"} />;\n  }\n\n  if (!isReset) {\n    return <Redirect to={state?.from || \"/forgot-password\"} />;\n  }\n\n  return (\n    <div className={styles.page}>\n      <h3 className=\"text text_type_main-medium mb-6\">Восстановление пароля</h3>\n      <Form onSubmit={handleSubmit}>\n        <Input\n          type={type ? \"text\" : \"password\"}\n          name=\"password\"\n          placeholder=\"Введите новый пароль\"\n          icon={type ? \"HideIcon\" : \"ShowIcon\"}\n          ref={passwordRef}\n          value={values.password}\n          onChange={handleChange}\n          onIconClick={() => onPassIconClick(passwordRef)}\n        />\n        <Input\n          type=\"text\"\n          placeholder=\"Введите код из письма\"\n          name=\"token\"\n          value={values.token}\n          onChange={handleChange}\n        />\n        <Button type=\"primary\" size=\"medium\">\n          Сохранить\n        </Button>\n      </Form>\n\n      <div className={`${styles.links} mt-20`}>\n        <p className=\"text text_type_main-default text_color_inactive mr-1\">\n          Вспомнили пароль?\n        </p>\n        <Link\n          to=\"/login\"\n          className={`${styles.link} text text_type_main-default`}\n        >\n          Войти\n        </Link>\n      </div>\n    </div>\n  );\n};\n","import { ChangeEvent, FormEvent, FC, useState, useEffect, useRef } from \"react\";\n\nimport {\n  Button,\n  Input,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport { Form } from \"../../../components/form\";\nimport { updateUser } from \"../../../services/actions/auth\";\nimport { IUserUpdateParams } from \"../../../services/types/data\";\nimport { useDispatch, useSelector } from \"../../../services/hooks\";\n\nimport styles from \"../styles.module.css\";\n\nexport const ProfileForm: FC = () => {\n  const dispatch = useDispatch();\n  const nameRef = useRef<HTMLInputElement>(null);\n  const emailRef = useRef<HTMLInputElement>(null);\n  const passwordRef = useRef<HTMLInputElement>(null);\n\n  const onFocusInput = (inputRef) =>\n    inputRef.current.classList.add(`${styles.active}`);\n  const onBlurInput = (inputRef) =>\n    inputRef.current.classList.remove(`${styles.active}`);\n  const onIconClick = (inputRef) => inputRef.current.focus();\n\n  const { isLoading, isError, user, error } = useSelector(\n    (store) => store.auth\n  );\n\n  const [values, setFormValues] = useState<IUserUpdateParams>({\n    name: user?.name ?? \"\",\n    email: user?.email ?? \"\",\n    password: \"\",\n  });\n\n  const handleReset = () => {\n    setFormValues({\n      name: user?.name ?? \"\",\n      email: user?.email ?? \"\",\n      password: \"\",\n    });\n  };\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    event.preventDefault();\n    setFormValues((prevState) => {\n      return { ...prevState, [event.target.name]: event.target.value };\n    });\n  };\n\n  const handleSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    await dispatch(updateUser(values));\n  };\n\n  useEffect(() => {\n    if (user) {\n      setFormValues({\n        name: user?.name ?? \"\",\n        email: user?.email ?? \"\",\n        password: \"\",\n      });\n    }\n  }, [user, setFormValues]);\n\n  return (\n    <>\n      {isLoading ? (\n        <h3 className=\"text text_type_main-default mt-10 mb-5\">...загрузка</h3>\n      ) : (\n        <div className={styles.form}>\n          <Form onSubmit={handleSubmit}>\n            <Input\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Имя\"\n              icon=\"EditIcon\"\n              ref={nameRef}\n              value={values.name}\n              onChange={handleChange}\n              onFocus={() => onFocusInput(nameRef)}\n              onBlur={() => onBlurInput(nameRef)}\n              onIconClick={() => onIconClick(nameRef)}\n            />\n\n            <Input\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Логин\"\n              icon=\"EditIcon\"\n              ref={emailRef}\n              value={values.email}\n              onChange={handleChange}\n              onFocus={() => onFocusInput(emailRef)}\n              onBlur={() => onBlurInput(emailRef)}\n              onIconClick={() => onIconClick(emailRef)}\n            />\n            <Input\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Пароль\"\n              icon=\"EditIcon\"\n              ref={passwordRef}\n              value={values.password}\n              onChange={handleChange}\n              onFocus={() => onFocusInput(passwordRef)}\n              onBlur={() => onBlurInput(passwordRef)}\n              onIconClick={() => onIconClick(passwordRef)}\n            />\n            {isError && (\n              <p className={`${styles.error} text text_type_main-default my-4`}>\n                {error?.message}\n              </p>\n            )}\n\n            {(values.email || values.password || values.name) && (\n              <div className={styles.form_btns}>\n                <Button type=\"secondary\" size=\"medium\" onClick={handleReset}>\n                  Отмена\n                </Button>\n                <Button type=\"primary\" size=\"medium\">\n                  Сохранить\n                </Button>\n              </div>\n            )}\n          </Form>\n        </div>\n      )}\n    </>\n  );\n};\n","import { IOrderData } from \"../services/types/data\";\n\nexport const sortOrderByDate = (a: IOrderData, b: IOrderData) =>\n  new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n","import { FC, useEffect, useMemo } from \"react\";\n\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_CLOSED,\n} from \"../../../services/actions/wsActions\";\nimport { WSS_API_USER_ORDERS } from \"../../../utils/constants\";\nimport OrdersFeed from \"../../../components/orders-feed\";\nimport { sortOrderByDate } from \"../../../utils/sortOrderByDate\";\nimport { useDispatch, useSelector } from \"../../../services/hooks\";\n\nimport styles from \"./styles.module.css\";\n\nexport const ProfileOrders: FC = () => {\n  const dispatch = useDispatch();\n  const { wsError, wsConnected, orders } = useSelector(\n    (store) => store.ordersFeed\n  );\n  const ordersData = useMemo(() => orders.sort(sortOrderByDate), [orders]);\n\n  useEffect(() => {\n    const accessToken = localStorage\n      .getItem(\"accessToken\")\n      ?.replace(\"Bearer \", \"\")\n      .trim();\n\n    dispatch({\n      type: WS_CONNECTION_START,\n      payload: `${WSS_API_USER_ORDERS}?token=${accessToken}`,\n    });\n    return () => {\n      dispatch({\n        type: WS_CONNECTION_CLOSED,\n      });\n    };\n  }, [dispatch]);\n\n  return (\n    <>\n      <h3 className=\"text text_type_main-medium mb-6\">История заказов</h3>\n      <div className={styles.history}>\n        {!wsError && wsConnected && orders.length === 0 && (\n          <h3 className=\"text text_type_main-default mt-10 mb-5\">\n            ...загрузка\n          </h3>\n        )}\n        {!wsError && wsConnected && orders && orders.length > 0 && (\n          <OrdersFeed orders={ordersData} isUserOrder />\n        )}\n        {wsError && (\n          <h3 className=\"text text_type_main-default mt-10 mb-5\">\n            Произошла ошибка. Проверьте интернет-подключение.\n          </h3>\n        )}\n      </div>\n    </>\n  );\n};\n","import { useEffect, memo, FC } from \"react\";\nimport {\n  NavLink,\n  Route,\n  Switch,\n  useLocation,\n  useHistory,\n  useRouteMatch,\n} from \"react-router-dom\";\n\nimport { ProfileForm } from \"./profile-form\";\nimport { ProfileOrders } from \"./profile-orders\";\nimport { ILocationState } from \"../../services/types/data\";\nimport { getUser, logout } from \"../../services/actions/auth\";\nimport { useDispatch } from \"../../services/hooks\";\n\nimport styles from \"./styles.module.css\";\n\nexport const Profile: FC = memo(() => {\n  const { path } = useRouteMatch();\n  const history = useHistory();\n  const location = useLocation<ILocationState>();\n  const dispatch = useDispatch();\n\n  const background =\n    history.action === \"PUSH\" && location.state && location.state.background;\n\n  const handleClickLogOut = async () => {\n    await dispatch(logout());\n    history.replace({ pathname: \"/login\" });\n  };\n\n  useEffect(() => {\n    dispatch(getUser());\n  }, [dispatch]);\n\n  return (\n    <div className={styles.page}>\n      <div className={styles.menu}>\n        <NavLink\n          exact\n          to=\"/profile\"\n          activeClassName={styles.link_active}\n          className={`${styles.link} text text_type_main-medium`}\n        >\n          Профиль\n        </NavLink>\n        <NavLink\n          exact\n          to=\"/profile/orders\"\n          activeClassName={styles.link_active}\n          className={`${styles.link} text text_type_main-medium`}\n        >\n          История заказов\n        </NavLink>\n        <div\n          className={`${styles.link} text text_type_main-medium`}\n          onClick={handleClickLogOut}\n        >\n          Выход\n        </div>\n        <div className=\"text text_type_main-default text_color_inactive mt-20\">\n          В этом разделе вы можете\n          <br />\n          изменить свои персональные данные\n        </div>\n      </div>\n      <div className={styles.content}>\n        <Switch location={background || location}>\n          <Route path={`${path}/`} exact>\n            <ProfileForm />\n          </Route>\n          <Route path={`${path}/orders`} exact>\n            <ProfileOrders />\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  );\n});\n","import { FC } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport styles from \"./styles.module.css\";\n\nexport const Page404: FC = () => {\n  const history = useHistory();\n\n  const handleClick = () => {\n    history.goBack();\n  };\n\n  return (\n    <div className={styles.page}>\n      <h3 className=\"text text_type_main-medium mb-6\">404</h3>\n      <h3 className=\"text text_type_main-medium mb-10\">Страница не найдена</h3>\n      <Button onClick={handleClick}>Вернуться обратно</Button>\n      <div className={`${styles.links} mt-6`}>\n        <p className=\"text text_type_main-default mr-2\">или на</p>\n        <Link to=\"/\" className={`${styles.link} text text_type_main-default`}>\n          главную страницу\n        </Link>\n      </div>\n    </div>\n  );\n};\n","import { FC } from \"react\";\nimport { Link, NavLink, useRouteMatch } from \"react-router-dom\";\n\nimport {\n  BurgerIcon,\n  ListIcon,\n  Logo,\n  ProfileIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport styles from \"./styles.module.css\";\n\nexport const Header: FC = () => {\n  const isConstructor = !!useRouteMatch({ path: ['/', '/react-burger'], exact: true });\n  const isFeed = !!useRouteMatch(\"/feed\");\n  const isProfile = !!useRouteMatch(\"/profile\");\n\n  return (\n    <header className={styles.header}>\n      <div className={`${styles.container} pt-4 pb-4`}>\n        <nav className={styles.nav}>\n          <NavLink\n            exact\n            to=\"/\"\n            activeClassName={styles.link_active}\n            className={`${styles.link} pt-4 pr-5 pb-4 pl-5 mr-2`}\n          >\n            <BurgerIcon type={isConstructor ? \"primary\" : \"secondary\"} />\n            <span className=\"text text_type_main-default ml-2\">\n              Конструктор\n            </span>\n          </NavLink>\n          <NavLink\n            exact\n            to=\"/feed\"\n            activeClassName={styles.link_active}\n            className={`${styles.link} pt-4 pr-5 pb-4 pl-5`}\n          >\n            <ListIcon type={isFeed ? \"primary\" : \"secondary\"} />\n            <span className=\"text text_type_main-default ml-2\">\n              Лента заказов\n            </span>\n          </NavLink>\n\n          <Link to=\"/\" className={styles.logo}>\n            <Logo />\n          </Link>\n\n          <NavLink\n            to=\"/profile\"\n            activeClassName={styles.link_active}\n            className={`${styles.profile} ${styles.link} pt-4 pr-5 pb-4 pl-5`}\n          >\n            <ProfileIcon type={isProfile ? \"primary\" : \"secondary\"} />\n            <span className=\"text text_type_main-default ml-2\">\n              Личный кабинет\n            </span>\n          </NavLink>\n        </nav>\n      </div>\n    </header>\n  );\n};\n","import { FC } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nimport { useSelector } from \"../../services/hooks\";\n\nimport { IProps } from \"./types\";\n\nexport const ProtectedRoute: FC<IProps> = ({ children, ...props }) => {\n  const { isAuthorized } = useSelector((store) => store.auth);\n\n  return (\n    <Route\n      {...props}\n      render={({ location }) => {\n        return isAuthorized ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: \"/login\",\n              state: { from: location },\n            }}\n          />\n        );\n      }}\n    />\n  );\n};\n","import { FC } from \"react\";\nimport styles from \"./styles.module.css\";\n\nexport const Loader: FC = () => {\n  return <div className={styles.loader}></div>;\n};\n","export default __webpack_public_path__ + \"static/media/done.49cd3906.png\";","import { FC } from \"react\";\n\nimport { useSelector } from \"../../services/hooks\";\n\nimport { Loader } from \"../loader\";\n\nimport styles from \"./styles.module.css\";\nimport doneIcon from \"../../images/done.png\";\n\nconst OrderDetails: FC = () => {\n  const { number } = useSelector((store) => store.order);\n  return (\n    <div className={styles.order}>\n      <p className=\"text text_type_digits-large mt-4 mb-8\">\n        {Number(number) > 0 ? number : \"-\"}\n      </p>\n      <p className=\"text text_type_main-medium mb-15\">идентификатор заказа</p>\n      {Number(number) === 0 ? (\n        <Loader />\n      ) : (\n        <img\n          className=\"mb-15\"\n          src={doneIcon}\n          alt=\"Иконка\"\n          width=\"120px\"\n          height=\"120px\"\n        />\n      )}\n\n      <p className=\"text text_type_main-default mb-2\">\n        Ваш заказ начали готовить\n      </p>\n      <p className=\"text text_type_main-default text_color_inactive mb-15\">\n        Дождитесь готовности на орбитальной станции\n      </p>\n    </div>\n  );\n};\n\nexport default OrderDetails;\n","import { FC } from \"react\";\n\nimport { IProps } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nconst ModalOverlay: FC<IProps> = ({ onClose }) => {\n  return <div className={styles.container} onClick={onClose} />;\n};\n\nexport default ModalOverlay;\n","import { FC, useEffect, SyntheticEvent } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport ReactDOM from \"react-dom\";\n\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport ModalOverlay from \"../modal-overlay\";\n\nimport { IProps } from \"./types\";\nimport styles from \"./styles.module.css\";\n\nconst Modal: FC<IProps> = ({ title, children }) => {\n  const history = useHistory();\n  const modalRoot = document.querySelector(\"#modals\") as HTMLElement;\n\n  const handleCloseModal = (event: Event | SyntheticEvent | undefined) => {\n    event?.stopPropagation();\n    history.goBack();\n  };\n\n  useEffect(() => {\n    const handleClose = (event: KeyboardEvent) => {\n      if (event.key === \"Escape\") {\n        handleCloseModal(event);\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleClose);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleClose);\n    };\n  });\n\n  return ReactDOM.createPortal(\n    <>\n      <ModalOverlay onClose={handleCloseModal} />\n      <div className={styles.modal}>\n        <div className={styles[\"modal__title-wrap\"]}>\n          <h3 className={`${styles.modal__title} text text_type_main-large`}>\n            {title}\n          </h3>\n          <span className={styles.modal__close} onClick={handleCloseModal}>\n            <CloseIcon type=\"primary\" />\n          </span>\n        </div>\n        {children}\n      </div>\n    </>,\n    modalRoot\n  );\n};\n\nexport default Modal;\n","import { FC } from \"react\";\n\nimport styles from \"./styles.module.css\";\n\nexport const Container: FC = ({ children }) => (\n  <main className={styles.container}>{children}</main>\n);\n","import { FC, useEffect } from \"react\";\nimport { Switch, Route, useLocation, useHistory } from \"react-router-dom\";\n\nimport { useDispatch } from \"../../services/hooks\";\n\nimport {\n  IngredientPage,\n  FeedPage,\n  MainPage,\n  LoginPage,\n  OrderPage,\n  RegisterPage,\n  Page404,\n  ForgotPassword,\n  ResetPassword,\n  Profile,\n} from \"../../pages\";\n\nimport { Header } from \"../header\";\nimport { ProtectedRoute } from \"../protected-route\";\nimport IngredientDetails from \"../ingredient-details\";\nimport FeedDetails from \"../feed-details\";\nimport OrderDetails from \"../order-details\";\nimport Modal from \"../modal\";\nimport { Container } from \"../container\";\n\nimport { getIngredientsData } from \"../../services/actions/burger-ingredients\";\n\nimport { ILocationState } from \"../../services/types/data\";\n\nconst App: FC = () => {\n  const history = useHistory();\n  const location = useLocation<ILocationState>();\n  const dispatch = useDispatch();\n\n  const action = history.action === \"PUSH\" || history.action === \"REPLACE\";\n  const background = action && location.state && location.state.background;\n\n  useEffect(() => {\n    dispatch(getIngredientsData());\n  }, [dispatch]);\n\n  return (\n    <>\n      <Header />\n      <Container>\n        <Switch location={background || location}>\n          <Route path=\"/404\" exact>\n            <Page404 />\n          </Route>\n          <Route path=\"/login\" exact>\n            <LoginPage />\n          </Route>\n          <Route path=\"/register\" exact>\n            <RegisterPage />\n          </Route>\n          <Route path=\"/forgot-password\" exact>\n            <ForgotPassword />\n          </Route>\n          <Route path=\"/reset-password\" exact>\n            <ResetPassword />\n          </Route>\n          <Route path={['/', '/react-burger']} exact>\n            <MainPage />\n          </Route>\n          <Route path={\"/ingredients/:ingredientId\"} exact>\n            <IngredientPage />\n          </Route>\n          <Route path=\"/feed\" exact>\n            <FeedPage />\n          </Route>\n          <Route path={\"/feed/:orderId\"} exact>\n            <OrderPage isUserOrder={false} />\n          </Route>\n          <ProtectedRoute path=\"/profile/orders/:orderId\" exact>\n            <OrderPage isUserOrder={true} />\n          </ProtectedRoute>\n          <ProtectedRoute path=\"/profile\">\n            <Profile />\n          </ProtectedRoute>\n          <Route path=\"*\">\n            <Page404 />\n          </Route>\n        </Switch>\n      </Container>\n\n      {background && (\n        <>\n          <ProtectedRoute\n            path=\"/create-order\"\n            children={\n              <Modal>\n                <OrderDetails />\n              </Modal>\n            }\n          />\n\n          <Route\n            path=\"/ingredients/:ingredientId\"\n            children={\n              <Modal title=\"Детали ингредиента\">\n                <IngredientDetails />\n              </Modal>\n            }\n          />\n\n          <Route\n            path=\"/feed/:orderId\"\n            children={\n              <Modal>\n                <FeedDetails />\n              </Modal>\n            }\n          />\n\n          <ProtectedRoute\n            path=\"/profile/orders/:orderId\"\n            children={\n              <Modal>\n                <FeedDetails />\n              </Modal>\n            }\n          />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default App;\n","import { IIngredientData } from \"../types/data\";\n\nimport {\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_SUCCESS,\n  GET_INGREDIENTS_FAILED,\n  INCREASE_INGREDIENT_COUNT,\n  DECREASE_INGREDIENT_COUNT,\n  CLEAR_INGREDIENTS_COUNT,\n  CLEAR_BUN_COUNT,\n  TBurgerIngredientsActions,\n} from \"../actions/burger-ingredients\";\n\ninterface IBurgerIngredientsState {\n  ingredients: Array<IIngredientData>;\n  isLoading: boolean;\n  isError: boolean;\n}\n\nconst initialState: IBurgerIngredientsState = {\n  ingredients: [],\n  isLoading: false,\n  isError: false,\n};\n\nexport const ingredients = (\n  state = initialState,\n  action: TBurgerIngredientsActions\n): IBurgerIngredientsState => {\n  switch (action.type) {\n    case GET_INGREDIENTS_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case GET_INGREDIENTS_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        ingredients: [...(action.ingredients as Array<IIngredientData>)].map(\n          (item) => ({ ...item, qty: 0 })\n        ),\n      };\n    case GET_INGREDIENTS_FAILED:\n      return {\n        ...state,\n        ingredients: [],\n        isLoading: false,\n        isError: true,\n      };\n    case INCREASE_INGREDIENT_COUNT:\n      return {\n        ...state,\n        ingredients: [...(state.ingredients as Array<IIngredientData>)].map(\n          (item) => {\n            const qty = item.qty ? item.qty : 0;\n            return item._id === action.id\n              ? { ...item, qty: qty + action.qty }\n              : item;\n          }\n        ),\n      };\n    case DECREASE_INGREDIENT_COUNT:\n      return {\n        ...state,\n        ingredients: [...(state.ingredients as Array<IIngredientData>)].map(\n          (item) => {\n            const qty = item.qty ? item.qty : 0;\n\n            return item._id === action.id\n              ? { ...item, qty: qty - action.qty }\n              : item;\n          }\n        ),\n      };\n    case CLEAR_BUN_COUNT:\n      return {\n        ...state,\n        ingredients: [...(state.ingredients as Array<IIngredientData>)].map(\n          (item) => (item.type === \"bun\" ? { ...item, qty: 0 } : item)\n        ),\n      };\n    case CLEAR_INGREDIENTS_COUNT:\n      return {\n        ...state,\n        ingredients: [...(state.ingredients as Array<IIngredientData>)].map(\n          (item) => (item.qty ? { ...item, qty: 0 } : item)\n        ),\n      };\n    default:\n      return state;\n  }\n};\n","import { IIngredientData } from \"../types/data\";\n\nimport {\n  ADD_BUN,\n  DELETE_BUN,\n  ADD_INGREDIENT,\n  DELETE_INGREDIENT,\n  SORT_INGREDIENTS,\n  RESET_CONSTRUCTOR,\n  TBurgerConstructorActions,\n} from \"../actions/burger-constructor\";\n\ninterface IBurgerConstructorState {\n  bun: IIngredientData | null;\n  filling: IIngredientData[];\n}\n\nconst initialState: IBurgerConstructorState = {\n  bun: null,\n  filling: [],\n};\n\nexport const burger = (\n  state = initialState,\n  action: TBurgerConstructorActions\n): IBurgerConstructorState => {\n  switch (action.type) {\n    case ADD_BUN:\n      return {\n        ...state,\n        bun: action.bun,\n      };\n    case DELETE_BUN:\n      return {\n        ...state,\n        bun: null,\n      };\n    case ADD_INGREDIENT:\n      return {\n        ...state,\n        filling: [\n          ...state.filling,\n          { ...action.item, uuid: new Date().getTime() + action.item._id },\n        ],\n      };\n    case DELETE_INGREDIENT:\n      return {\n        ...state,\n        filling: [...(state.filling as Array<IIngredientData>)].filter(\n          (item) => item.uuid !== action.id\n        ),\n      };\n    case SORT_INGREDIENTS:\n      const arr = [...state.filling];\n      const dragItem = arr[action.dragIndex];\n      const hoverItem = arr[action.hoverIndex];\n      arr[action.hoverIndex] = dragItem;\n      arr[action.dragIndex] = hoverItem;\n      return {\n        ...state,\n        filling: arr,\n      };\n    case RESET_CONSTRUCTOR:\n      return initialState;\n    default:\n      return state;\n  }\n};\n","import { IIngredientData } from \"../types/data\";\n\nimport {\n  SELECT_INGREDIENT,\n  TIngredientDetailsActions,\n} from \"../actions/ingredient-details\";\n\ninterface IIngredientDetailsState {\n  ingredient: IIngredientData | null;\n}\n\nconst initialState: IIngredientDetailsState = {\n  ingredient: null,\n};\n\nexport const ingredient = (\n  state = initialState,\n  action: TIngredientDetailsActions\n): IIngredientDetailsState => {\n  switch (action.type) {\n    case SELECT_INGREDIENT:\n      return {\n        ...state,\n        ingredient: action.ingredient,\n      };\n    default:\n      return state;\n  }\n};\n","import { IIngredientData, IOrderData } from \"../types/data\";\n\nimport {\n  CREATE_ORDER_REQUEST,\n  CREATE_ORDER_SUCCESS,\n  CREATE_ORDER_FAILED,\n  RESET_ORDER,\n  SET_ORDER_ITEMS,\n  SELECT_ORDER,\n  TOrderActions,\n} from \"../actions/order\";\n\ninterface IOrderState {\n  number: number | 0;\n  ingredients: Array<IIngredientData> | [];\n  isLoading: boolean;\n  isError: boolean;\n  order: IOrderData | null;\n}\n\nexport const initialState: IOrderState = {\n  number: 0,\n  ingredients: [],\n  isLoading: false,\n  isError: false,\n  order: null,\n};\n\nexport const order = (\n  state = initialState,\n  action: TOrderActions\n): IOrderState => {\n  switch (action.type) {\n    case CREATE_ORDER_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case CREATE_ORDER_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        ingredients: [],\n        number: action.number,\n      };\n    case CREATE_ORDER_FAILED:\n      return {\n        ...state,\n        ingredients: [],\n        isLoading: false,\n        isError: true,\n      };\n    case SET_ORDER_ITEMS:\n      return {\n        ...state,\n        ingredients: action.order,\n      };\n    case RESET_ORDER:\n      return {\n        ...state,\n        number: 0,\n      };\n    case SELECT_ORDER:\n      return {\n        ...state,\n        order: action.order,\n      };\n    default:\n      return state;\n  }\n};\n","import { IErrorResponse, IUserResponse } from \"../types/data\";\n\nimport {\n  LOGIN_REQUEST,\n  LOGIN_SUCCESS,\n  LOGIN_FAILED,\n  LOGOUT_REQUEST,\n  LOGOUT_SUCCESS,\n  LOGOUT_FAILED,\n  REGISTRATION_REQUEST,\n  REGISTRATION_SUCCESS,\n  REGISTRATION_FAILED,\n  USER_REQUEST,\n  USER_SUCCESS,\n  USER_FAILED,\n  UPDATE_TOKEN_REQUEST,\n  UPDATE_TOKEN_SUCCESS,\n  UPDATE_TOKEN_FAILED,\n  FORGOT_PASSWORD_REQUEST,\n  FORGOT_PASSWORD_SUCCESS,\n  FORGOT_PASSWORD_FAILED,\n  RESET_PASSWORD_REQUEST,\n  RESET_PASSWORD_SUCCESS,\n  RESET_PASSWORD_FAILED,\n  TAuthActions,\n} from \"../actions/auth\";\n\ninterface IAuthState {\n  user: IUserResponse | null;\n  error: IErrorResponse | null;\n  isLoading: boolean;\n  isError: boolean;\n  isAuthorized: boolean;\n  isReset: boolean;\n}\n\nexport const initialState: IAuthState = {\n  user: null,\n  error: null,\n  isLoading: false,\n  isError: false,\n  isAuthorized: Boolean(localStorage.getItem(\"accessToken\")),\n  isReset: false,\n};\n\nexport const auth = (\n  state = initialState,\n  action: TAuthActions\n): IAuthState => {\n  switch (action.type) {\n    case LOGIN_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case LOGIN_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        error: null,\n        user: action.user,\n        isAuthorized: true,\n      };\n    case LOGIN_FAILED:\n      return {\n        ...state,\n        user: null,\n        error: action.error,\n        isLoading: false,\n        isError: true,\n        isAuthorized: false,\n      };\n    case LOGOUT_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case LOGOUT_SUCCESS:\n      return {\n        ...state,\n        user: null,\n        isLoading: false,\n        isError: false,\n        isAuthorized: false,\n      };\n    case LOGOUT_FAILED:\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      };\n    case REGISTRATION_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case REGISTRATION_SUCCESS:\n      return {\n        ...state,\n        error: null,\n        user: action.user,\n        isLoading: false,\n        isError: false,\n        isAuthorized: true,\n      };\n    case REGISTRATION_FAILED:\n      return {\n        ...state,\n        error: action.error,\n        isLoading: false,\n        isError: true,\n        isAuthorized: false,\n      };\n    case FORGOT_PASSWORD_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case FORGOT_PASSWORD_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        isReset: true,\n      };\n    case FORGOT_PASSWORD_FAILED:\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      };\n    case RESET_PASSWORD_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case RESET_PASSWORD_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        isReset: false,\n      };\n    case RESET_PASSWORD_FAILED:\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      };\n    case USER_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case USER_SUCCESS:\n      return {\n        ...state,\n        error: null,\n        user: action.user,\n        isLoading: false,\n        isError: false,\n        isAuthorized: true,\n      };\n    case USER_FAILED:\n      return {\n        ...state,\n        error: action.error,\n        isLoading: false,\n        isError: true,\n      };\n    case UPDATE_TOKEN_REQUEST:\n      return {\n        ...state,\n        isLoading: true,\n      };\n    case UPDATE_TOKEN_SUCCESS:\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        isAuthorized: true,\n      };\n    case UPDATE_TOKEN_FAILED:\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      };\n    default:\n      return state;\n  }\n};\n","import { IOrderData } from \"../types/data\";\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_CLOSED,\n  WS_GET_MESSAGE,\n  TWSActions,\n} from \"../actions/wsActions\";\n\nexport interface IWSState {\n  orders: Array<IOrderData>;\n  total: number;\n  totalToday: number;\n  wsConnected: boolean;\n  wsError: boolean;\n}\n\nconst initialState: IWSState = {\n  orders: [],\n  total: 0,\n  totalToday: 0,\n  wsConnected: false,\n  wsError: false,\n};\n\nexport const wsReducer = (\n  state = initialState,\n  action: TWSActions\n): IWSState => {\n  switch (action.type) {\n    case WS_CONNECTION_START:\n      return {\n        ...state,\n        wsConnected: true,\n      };\n\n    case WS_CONNECTION_SUCCESS:\n      return {\n        ...state,\n        wsConnected: true,\n      };\n\n    case WS_CONNECTION_ERROR:\n      return {\n        ...state,\n        orders: [],\n        total: 0,\n        totalToday: 0,\n        wsConnected: false,\n        wsError: true,\n      };\n\n    case WS_CONNECTION_CLOSED:\n      return {\n        ...state,\n        orders: [],\n        total: 0,\n        totalToday: 0,\n        wsConnected: false,\n        wsError: false,\n      };\n\n    case WS_GET_MESSAGE:\n      return {\n        ...state,\n        orders: action.payload.orders,\n        total: action.payload.total,\n        totalToday: action.payload.totalToday,\n        wsConnected: true,\n        wsError: false,\n      };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\nimport { ingredients } from \"./burger-ingredients\";\nimport { burger } from \"./burger-constructor\";\nimport { ingredient } from \"./ingredient-details\";\nimport { order } from \"./order\";\nimport { auth } from \"./auth\";\nimport { wsReducer } from \"./wsReducer\";\n\nexport const rootReducer = combineReducers({\n  auth,\n  ingredients,\n  burger,\n  ingredient,\n  order,\n  ordersFeed: wsReducer,\n});\n","import thunk from \"redux-thunk\";\nimport { applyMiddleware, compose, createStore } from \"redux\";\nimport { socketMiddleware } from \"../../services/middleware\";\nimport { WSS_URL } from \"../../utils/constants\";\nimport { rootReducer } from \"../reducers\";\n\nimport {\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_CLOSED,\n  WS_GET_MESSAGE,\n} from \"../actions/wsActions\";\n\nconst wsActions = {\n  onInit: WS_CONNECTION_START,\n  onOpen: WS_CONNECTION_SUCCESS,\n  onClose: WS_CONNECTION_CLOSED,\n  onError: WS_CONNECTION_ERROR,\n  onMessage: WS_GET_MESSAGE,\n};\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n  }\n}\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst enhancer = composeEnhancers(\n  applyMiddleware(thunk, socketMiddleware(WSS_URL, wsActions))\n);\n\nexport const store = createStore(rootReducer, enhancer);\n","import { Middleware, MiddlewareAPI } from \"redux\";\nimport { AppDispatch, RootState } from \"../types\";\n\nexport const socketMiddleware = (wsUrl, wsActions): Middleware => {\n  return ((store: MiddlewareAPI<AppDispatch, RootState>) => {\n    let socket: WebSocket | null = null;\n\n    return (next) => (action) => {\n      const { dispatch } = store;\n      const { type, payload } = action;\n      const { onInit, onOpen, onClose, onError, onMessage } = wsActions;\n\n      if (type === onInit) {\n        socket = new WebSocket(`${wsUrl}/${payload}`);\n      }\n      if (socket) {\n        socket.onopen = () => {\n          dispatch({ type: onOpen });\n        };\n\n        socket.onerror = () => {\n          dispatch({ type: onError });\n        };\n\n        socket.onmessage = (event) => {\n          const { data } = event;\n          dispatch({ type: onMessage, payload: JSON.parse(data) });\n        };\n\n        socket.onclose = () => {\n          dispatch({ type: onClose });\n        };\n\n        if (type === onClose) {\n          socket?.close();\n        }\n      }\n\n      next(action);\n    };\n  }) as Middleware;\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport App from \"./components/app\";\nimport { store } from \"./services/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router basename=\"/react-burger\">\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__25lBf\",\"container\":\"styles_container__3bzuP\",\"nav\":\"styles_nav__1MyV5\",\"profile\":\"styles_profile__1LETK\",\"logo\":\"styles_logo__3niLp\",\"link\":\"styles_link__3kaoC\",\"link_active\":\"styles_link_active__3lTpM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"styles_feed__3bZQY\",\"title\":\"styles_title__2qnXN\",\"status\":\"styles_status__2Ay_y\",\"status_done\":\"styles_status_done__3tOTl\",\"ingredients\":\"styles_ingredients__2jB0A\",\"ingredient\":\"styles_ingredient__1F8Z0\",\"ingredient__info\":\"styles_ingredient__info__2y6c1\",\"ingredient__price\":\"styles_ingredient__price__2u5xp\",\"feed__footer\":\"styles_feed__footer__2z0Zh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor\":\"styles_constructor__26Ruh\",\"constructor__items\":\"styles_constructor__items__oqI5O\",\"constructor__item\":\"styles_constructor__item__3bOPO\",\"constructor__items-inner\":\"styles_constructor__items-inner__jMXpJ\",\"constructor__bottom\":\"styles_constructor__bottom__39hmg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"styles_ingredient__2Csxg\",\"ingredient__items\":\"styles_ingredient__items__Wk446\",\"ingredient__item\":\"styles_ingredient__item__z0vJ2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"styles_order__33EZ3\",\"info\":\"styles_info__186UM\",\"status\":\"styles_status__14MsC\",\"status_done\":\"styles_status_done__2GcfL\",\"details\":\"styles_details__1ayNZ\",\"price\":\"styles_price__3g_OW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"summary\":\"styles_summary__x9d8Y\",\"orders\":\"styles_orders__2JrfO\",\"orders-in-progress\":\"styles_orders-in-progress__3gvz0\",\"orders-in-done\":\"styles_orders-in-done__3jEIf\",\"text-shadow\":\"styles_text-shadow__RgSSF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"styles_page__T5qNp\",\"links\":\"styles_links__2bIPr\",\"link\":\"styles_link__HD4ft\",\"error\":\"styles_error__31YjW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatars\":\"styles_avatars__3jzIL\",\"avatar-wrap\":\"styles_avatar-wrap__22Pne\",\"bg\":\"styles_bg__1uJ_T\",\"more\":\"styles_more__3qdtA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"styles_card__2jjAO\",\"card__img\":\"styles_card__img__1OPS4\",\"card__price\":\"styles_card__price__3H6k9\",\"card__title\":\"styles_card__title__31sml\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"styles_page__PEMoi\",\"links\":\"styles_links__DziDP\",\"link\":\"styles_link__3FGkI\",\"error\":\"styles_error__3Pac9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"styles_modal__23SHU\",\"modal__title-wrap\":\"styles_modal__title-wrap__2o9RA\",\"modal__title\":\"styles_modal__title__3hypv\",\"modal__close\":\"styles_modal__close__2cqmL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"styles_ingredients__3iuT7\",\"ingredients__tabs\":\"styles_ingredients__tabs__2csfV\",\"ingredients__content\":\"styles_ingredients__content__22zrj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"styles_page__93Sv-\",\"links\":\"styles_links__2-zxk\",\"link\":\"styles_link__2GR4I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"styles_page__Jxz20\",\"links\":\"styles_links__3INvR\",\"link\":\"styles_link__1GNvX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"styles_page__1boAN\",\"links\":\"styles_links__26Owf\",\"link\":\"styles_link__afY1F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"styles_avatar__1OtWK\",\"img\":\"styles_img__j8jMD\"};"],"sourceRoot":""}